# ═════════════════════════════════════════════════════════════════
# Django-CFG Docker Environment Configuration
# ═════════════════════════════════════════════════════════════════
# IMPORTANT: This file contains SECRETS - never commit to git!
# Add to .gitignore if not already present
# ═════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────
# PostgreSQL Configuration (Dokploy shared-db)
# ─────────────────────────────────────────────────────────────────
POSTGRES_DB=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE-ME-IN-PRODUCTION

# ─────────────────────────────────────────────────────────────────
# Database Configuration (pydantic-settings nested format)
# ─────────────────────────────────────────────────────────────────
# Production uses shared-db-postgres from Dokploy
DATABASE__URL=postgresql://postgres:postgres@shared-db-postgres:5432/django_cfg

# ─────────────────────────────────────────────────────────────────
# Django Core Configuration
# ─────────────────────────────────────────────────────────────────
SECRET_KEY=django-insecure-dev-key-change-in-production-min-50-chars-required
DEBUG=False

# Legacy variables (for backward compatibility)
DJANGO_SECRET_KEY=django-insecure-dev-key-change-in-production-min-50-chars-required
DJANGO_DEBUG=False
JWT_SECRET_KEY=jwt-secret-key-change-in-production-min-32-chars

# ─────────────────────────────────────────────────────────────────
# Environment Mode (matches docker-compose-production.yaml)
# ─────────────────────────────────────────────────────────────────
IS_PROD=true
IS_DEV=false
IS_TEST=false
DJANGO_CREATE_ADMIN=true

# ─────────────────────────────────────────────────────────────────
# Application Configuration (PRODUCTION URLs)
# ─────────────────────────────────────────────────────────────────
APP__NAME=Django CFG
APP__DOMAIN=djangocfg.com
APP__API_URL=https://api.djangocfg.com
APP__SITE_URL=https://demo.djangocfg.com

# ─────────────────────────────────────────────────────────────────
# Email Configuration
# ─────────────────────────────────────────────────────────────────
EMAIL__BACKEND=smtp
EMAIL__HOST=mail.example.com
EMAIL__PORT=465
EMAIL__USERNAME=your-email@example.com
EMAIL__PASSWORD=your-email-password-here
EMAIL__USE_TLS=false
EMAIL__USE_SSL=true
EMAIL__DEFAULT_FROM=your-email@example.com

# ─────────────────────────────────────────────────────────────────
# Telegram Configuration
# ─────────────────────────────────────────────────────────────────
TELEGRAM__BOT_TOKEN=your-telegram-bot-token-here
TELEGRAM__CHAT_ID=your-telegram-chat-id-here

# ─────────────────────────────────────────────────────────────────
# Redis Configuration (Dokploy shared-db)
# ─────────────────────────────────────────────────────────────────
REDIS_URL=redis://shared-db-redis:6379/0

# ═════════════════════════════════════════════════════════════════
# Django-RQ Background Tasks Configuration
# ═════════════════════════════════════════════════════════════════
# RQ uses Django's REDIS_URL setting (configured above)
# Dashboard: https://api.djangocfg.com/cfg/admin/ → RQ tab
# No additional environment variables needed!
# Optional: Enable basic auth for security (see docker-compose-production.yaml)

# ─────────────────────────────────────────────────────────────────
# Centrifugo Server Configuration (used by Centrifugo Docker container)
# ─────────────────────────────────────────────────────────────────
CENTRIFUGO_API_KEY=centrifugo-api-key-change-in-production-min-32-chars
# IMPORTANT: CENTRIFUGO_TOKEN_HMAC_SECRET must match CENTRIFUGO__CENTRIFUGO_TOKEN_HMAC_SECRET
CENTRIFUGO_TOKEN_HMAC_SECRET=django-secret-key-change-in-production-at-least-32-chars
CENTRIFUGO_ADMIN_PASSWORD=admin
CENTRIFUGO_ADMIN_SECRET=admin-secret-change-in-production
CENTRIFUGO_LOG_LEVEL=info

# ─────────────────────────────────────────────────────────────────
# Django-CFG Centrifugo Client Configuration (used by Django application)
# ─────────────────────────────────────────────────────────────────
# Nested format with CENTRIFUGO__ prefix for Pydantic BaseSettings
CENTRIFUGO__ENABLED=true
CENTRIFUGO__WRAPPER_URL=https://ws.djangocfg.com
CENTRIFUGO__WRAPPER_API_KEY=wrapper-api-key-change-in-production
CENTRIFUGO__CENTRIFUGO_URL=wss://ws.djangocfg.com/connection/websocket
CENTRIFUGO__CENTRIFUGO_API_URL=http://centrifugo:8000/api
CENTRIFUGO__CENTRIFUGO_API_KEY=centrifugo-api-key-change-in-production-min-32-chars
# IMPORTANT: Must match CENTRIFUGO_TOKEN_HMAC_SECRET above for JWT token validation
CENTRIFUGO__CENTRIFUGO_TOKEN_HMAC_SECRET=django-secret-key-change-in-production-at-least-32-chars
CENTRIFUGO__DEFAULT_ACK_TIMEOUT=30
CENTRIFUGO__LOG_LEVEL=INFO
CENTRIFUGO__LOG_ALL_CALLS=true
CENTRIFUGO__LOG_ONLY_WITH_ACK=false

# ─────────────────────────────────────────────────────────────────
# gRPC Configuration
# ─────────────────────────────────────────────────────────────────
# Public gRPC URL for clients (omit :443 for standard TLS port)
# Architecture: Client → grpc.djangocfg.com:443 (TLS) → Traefik → gRPC container:50051
# IMPORTANT: In Cloudflare DNS, grpc.djangocfg.com must be DNS-only (gray cloud icon)
#            gRPC does NOT work through Cloudflare proxy on Free plan (requires Pro+)
# See: docker-compose-production.yaml for Traefik configuration
GRPC_URL=grpc.djangocfg.com

# ─────────────────────────────────────────────────────────────────
# AI API Keys (pydantic-settings nested format)
# ─────────────────────────────────────────────────────────────────
API_KEYS__OPENROUTER=your-openrouter-api-key-here
API_KEYS__OPENAI=your-openai-api-key-here

# Legacy format (for Docker Compose backward compatibility)
ANTHROPIC_API_KEY=your-anthropic-api-key-here
OPENAI_API_KEY=your-openai-api-key-here

# ─────────────────────────────────────────────────────────────────
# Payments API Keys
# ─────────────────────────────────────────────────────────────────
PAYMENTS_API_KEYS__NOWPAYMENTS_API_KEY=your-nowpayments-api-key-here
PAYMENTS_API_KEYS__NOWPAYMENTS_IPN_SECRET=your-nowpayments-ipn-secret-here
PAYMENTS_API_KEYS__NOWPAYMENTS_SANDBOX_MODE=true
