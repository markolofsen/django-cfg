# ═════════════════════════════════════════════════════════════════
# Django-CFG Docker Environment Configuration
# ═════════════════════════════════════════════════════════════════
# IMPORTANT: This file is a TEMPLATE - copy to .env.local or .env.prod
# Never commit actual secrets to git!
# ═════════════════════════════════════════════════════════════════
#
# Quick Start:
#   cp .env.example .env.local   # For local Docker development
#   cp .env.example .env.prod    # For production deployment
#
# Then edit your .env file with actual values
# ═════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────
# PostgreSQL Configuration
# ─────────────────────────────────────────────────────────────────
# Local: Use 'postgres' service name
# Production: Use Dokploy shared-db or your database hostname
POSTGRES_DB=djangocfg
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE-ME-IN-PRODUCTION

# ─────────────────────────────────────────────────────────────────
# Database Configuration (pydantic-settings nested format)
# ─────────────────────────────────────────────────────────────────
# Local: postgresql://postgres:PASSWORD@postgres:5432/djangocfg
# Production: postgresql://postgres:PASSWORD@shared-db-postgres:5432/djangocfg
DATABASE__URL=postgresql://postgres:CHANGE-ME@postgres:5432/djangocfg

# ─────────────────────────────────────────────────────────────────
# Django Core Configuration
# ─────────────────────────────────────────────────────────────────
# IMPORTANT: Generate strong SECRET_KEY (minimum 50 characters)
# You can use: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
SECRET_KEY=django-insecure-CHANGE-ME-min-50-chars-required
DEBUG=False

# Legacy variables (for backward compatibility)
DJANGO_SECRET_KEY=django-insecure-CHANGE-ME-min-50-chars-required
DJANGO_DEBUG=False
DJANGO_CREATE_ADMIN=true
JWT_SECRET_KEY=jwt-secret-CHANGE-ME-min-32-chars

# ─────────────────────────────────────────────────────────────────
# Environment Mode
# ─────────────────────────────────────────────────────────────────
IS_PROD=true
IS_DEV=false
IS_TEST=false

# ─────────────────────────────────────────────────────────────────
# Application Configuration
# ─────────────────────────────────────────────────────────────────
# Local: http://localhost:PORT
# Production: https://yourdomain.com
APP__NAME=Django CFG
APP__DOMAIN=localhost
APP__API_URL=http://localhost:7301
APP__SITE_URL=http://localhost:7310

# ─────────────────────────────────────────────────────────────────
# Email Configuration
# ─────────────────────────────────────────────────────────────────
EMAIL__BACKEND=smtp
EMAIL__HOST=smtp.example.com
EMAIL__PORT=465
EMAIL__USERNAME=your-email@example.com
EMAIL__PASSWORD=your-email-password
EMAIL__USE_TLS=false
EMAIL__USE_SSL=true
EMAIL__DEFAULT_FROM=noreply@example.com

# ─────────────────────────────────────────────────────────────────
# Telegram Configuration (optional)
# ─────────────────────────────────────────────────────────────────
TELEGRAM__BOT_TOKEN=your-telegram-bot-token
TELEGRAM__CHAT_ID=your-chat-id

# ─────────────────────────────────────────────────────────────────
# Redis Configuration
# ─────────────────────────────────────────────────────────────────
# Local: redis://redis:6379/0
# Production: redis://shared-db-redis:6379/0
REDIS_URL=redis://redis:6379/0
REDIS_DRAMATIQ_URL=redis://redis:6379/1

# ─────────────────────────────────────────────────────────────────
# Dramatiq Configuration
# ─────────────────────────────────────────────────────────────────
DRAMATIQ_PROCESSES=2
DRAMATIQ_THREADS=4

# ─────────────────────────────────────────────────────────────────
# Centrifugo Server Configuration (used by Centrifugo Docker container)
# ─────────────────────────────────────────────────────────────────
# IMPORTANT: Generate secure random keys for production (minimum 32 chars)
CENTRIFUGO_API_KEY=centrifugo-api-CHANGE-ME-min-32-chars
# IMPORTANT: CENTRIFUGO_TOKEN_HMAC_SECRET must match CENTRIFUGO__CENTRIFUGO_TOKEN_HMAC_SECRET below
CENTRIFUGO_TOKEN_HMAC_SECRET=django-secret-CHANGE-ME-min-32-chars
CENTRIFUGO_ADMIN_PASSWORD=admin
CENTRIFUGO_ADMIN_SECRET=admin-secret-CHANGE-ME
CENTRIFUGO_LOG_LEVEL=info

# ─────────────────────────────────────────────────────────────────
# Django-CFG Centrifugo Client Configuration (used by Django application)
# ─────────────────────────────────────────────────────────────────
# Nested format with CENTRIFUGO__ prefix for Pydantic BaseSettings
CENTRIFUGO__ENABLED=true
# Local: http://localhost:7301
# Production: https://api.yourdomain.com
CENTRIFUGO__WRAPPER_URL=http://localhost:7301
CENTRIFUGO__WRAPPER_API_KEY=wrapper-api-CHANGE-ME
# Local: ws://localhost:7320/connection/websocket
# Production: wss://ws.yourdomain.com/connection/websocket
CENTRIFUGO__CENTRIFUGO_URL=ws://localhost:7320/connection/websocket
CENTRIFUGO__CENTRIFUGO_API_URL=http://centrifugo:8000/api
CENTRIFUGO__CENTRIFUGO_API_KEY=centrifugo-api-CHANGE-ME-min-32-chars
# IMPORTANT: Must match CENTRIFUGO_TOKEN_HMAC_SECRET above for JWT token validation
CENTRIFUGO__CENTRIFUGO_TOKEN_HMAC_SECRET=django-secret-CHANGE-ME-min-32-chars
CENTRIFUGO__DEFAULT_ACK_TIMEOUT=30
CENTRIFUGO__LOG_LEVEL=INFO
CENTRIFUGO__LOG_ALL_CALLS=true
CENTRIFUGO__LOG_ONLY_WITH_ACK=false

# ─────────────────────────────────────────────────────────────────
# AI API Keys (pydantic-settings nested format)
# ─────────────────────────────────────────────────────────────────
API_KEYS__OPENROUTER=sk-or-v1-your-openrouter-key-here
API_KEYS__OPENAI=sk-proj-your-openai-key-here

# Legacy format (for Docker Compose backward compatibility)
ANTHROPIC_API_KEY=your-anthropic-api-key-here
OPENAI_API_KEY=sk-proj-your-openai-key-here

# ─────────────────────────────────────────────────────────────────
# Payments API Keys (optional)
# ─────────────────────────────────────────────────────────────────
PAYMENTS_API_KEYS__NOWPAYMENTS_API_KEY=your-nowpayments-key
PAYMENTS_API_KEYS__NOWPAYMENTS_IPN_SECRET=your-ipn-secret
PAYMENTS_API_KEYS__NOWPAYMENTS_SANDBOX_MODE=true
