<!-- Task Table Widget -->
<div class="task-table-widget overflow-x-auto custom-scrollbar">
    <table class="min-w-full bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700">
        <thead class="bg-gray-50 dark:bg-gray-700">
            <tr>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32">
                    <div class="flex items-center space-x-1">
                        <span>Status</span>
                    </div>
                </th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                    <div class="flex items-center space-x-1">
                        <span>Task</span>
                    </div>
                </th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-24">
                    <div class="flex items-center space-x-1">
                        <span>Queue</span>
                    </div>
                </th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-20">
                    Duration
                </th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-24">
                    <div class="flex items-center space-x-1">
                        <span>Updated</span>
                    </div>
                </th>
                <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32">
                    Actions
                </th>
            </tr>
        </thead>
        <tbody class="divide-y divide-gray-200 dark:divide-gray-600">
            <template x-for="task in filteredTasks" :key="task.id || task.task_id || task.message_id">
                <tr class="task-row hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                    <!-- Status -->
                    <td class="px-4 py-3">
                        <span class="status-badge"
                              :class="'status-badge ' + (task.status || 'pending')"
                              x-text="task.status || 'pending'"></span>
                    </td>

                    <!-- Task Name -->
                    <td class="px-4 py-3">
                        <div class="text-sm font-medium text-gray-900 dark:text-white" x-text="task.name || task.actor_name || task.task_id"></div>
                        <div class="text-xs text-gray-500 dark:text-gray-400" x-text="task.task_id || task.message_id"></div>
                    </td>

                    <!-- Queue -->
                    <td class="px-4 py-3">
                        <span class="text-sm text-gray-700 dark:text-gray-300" x-text="task.queue || task.queue_name || 'default'"></span>
                    </td>

                    <!-- Duration -->
                    <td class="px-4 py-3">
                        <span class="text-sm text-gray-700 dark:text-gray-300" x-text="formatDuration(task.duration)"></span>
                    </td>

                    <!-- Updated -->
                    <td class="px-4 py-3">
                        <span class="text-xs text-gray-500 dark:text-gray-400" x-text="formatDate(task.updated_at || task.created_at)"></span>
                    </td>

                    <!-- Actions -->
                    <td class="px-4 py-3 text-right">
                        <div class="flex items-center justify-end space-x-2">
                            <button @click="viewTaskDetails(task)"
                                    class="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"
                                    title="View details">
                                <span class="material-icons text-sm">visibility</span>
                            </button>
                            <button @click="retryTask(task)"
                                    x-show="task.status === 'failed'"
                                    class="text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300"
                                    title="Retry task">
                                <span class="material-icons text-sm">refresh</span>
                            </button>
                            <button @click="deleteTask(task)"
                                    class="text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300"
                                    title="Delete task">
                                <span class="material-icons text-sm">delete</span>
                            </button>
                        </div>
                    </td>
                </tr>
            </template>
        </tbody>
    </table>
</div>
