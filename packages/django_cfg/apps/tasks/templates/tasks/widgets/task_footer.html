<!-- Task Footer Widget -->
<div class="px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 rounded-b-xl">
    <!-- Pagination (top section) -->
    <div class="flex items-center justify-between mb-4 pb-4 border-b border-gray-200 dark:border-gray-700" x-show="pagination.total_pages > 1">
        <div class="text-sm text-gray-600 dark:text-gray-400">
            Showing <span class="font-semibold" x-text="((pagination.page - 1) * pagination.page_size) + 1"></span>
            to <span class="font-semibold" x-text="Math.min(pagination.page * pagination.page_size, pagination.total_count)"></span>
            of <span class="font-semibold" x-text="pagination.total_count"></span> tasks
        </div>

        <div class="flex items-center space-x-2">
            <!-- Previous Button -->
            <button @click="previousPage()"
                    :disabled="!pagination.has_previous"
                    class="inline-flex items-center px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                <span class="material-icons text-sm">chevron_left</span>
                Previous
            </button>

            <!-- Page Numbers -->
            <div class="flex items-center space-x-1">
                <template x-for="pageNum in Array.from({length: pagination.total_pages}, (_, i) => i + 1)" :key="pageNum">
                    <button @click="goToPage(pageNum)"
                            x-show="pageNum === 1 || pageNum === pagination.total_pages || Math.abs(pageNum - pagination.page) <= 2"
                            :class="pageNum === pagination.page ? 'bg-blue-600 text-white' : 'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'"
                            class="px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg transition-colors">
                        <span x-text="pageNum"></span>
                    </button>
                </template>
            </div>

            <!-- Next Button -->
            <button @click="nextPage()"
                    :disabled="!pagination.has_next"
                    class="inline-flex items-center px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                Next
                <span class="material-icons text-sm">chevron_right</span>
            </button>
        </div>
    </div>

    <div class="flex items-center justify-between flex-wrap gap-4">
        <!-- Status Summary -->
        <div class="flex items-center space-x-6 text-sm">
            <div class="flex items-center">
                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                <span class="text-gray-600 dark:text-gray-400">Completed</span>
                <span class="ml-1 font-semibold text-gray-900 dark:text-white"
                      x-text="tasks.filter(t => t.status === 'completed').length"></span>
            </div>
            <div class="flex items-center">
                <div class="w-3 h-3 bg-blue-500 rounded-full mr-2"></div>
                <span class="text-gray-600 dark:text-gray-400">Running</span>
                <span class="ml-1 font-semibold text-gray-900 dark:text-white"
                      x-text="tasks.filter(t => t.status === 'running').length"></span>
            </div>
            <div class="flex items-center">
                <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                <span class="text-gray-600 dark:text-gray-400">Pending</span>
                <span class="ml-1 font-semibold text-gray-900 dark:text-white"
                      x-text="tasks.filter(t => t.status === 'pending').length"></span>
            </div>
            <div class="flex items-center">
                <div class="w-3 h-3 bg-red-500 rounded-full mr-2"></div>
                <span class="text-gray-600 dark:text-gray-400">Failed</span>
                <span class="ml-1 font-semibold text-gray-900 dark:text-white"
                      x-text="tasks.filter(t => t.status === 'failed').length"></span>
            </div>
        </div>

        <!-- Actions -->
        <div class="flex items-center space-x-2">
            <button @click="clearCompletedTasks()"
                    :disabled="loading || tasks.filter(t => t.status === 'completed').length === 0"
                    class="px-3 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                Clear Completed
            </button>
            <button @click="exportTasksCSV()"
                    :disabled="loading || tasks.length === 0"
                    class="inline-flex items-center px-3 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                <span class="material-icons text-sm mr-1">download</span>
                Export CSV
            </button>
        </div>
    </div>
</div>
