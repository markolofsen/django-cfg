(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43164],{48747:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/private/centrifugo",function(){return a(54893)}])},54893:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>ey});var n=a(94513),t=a(94285),r=a(77625),l=a(7737),i=a(21936),c=a(55833),d=a(60299),o=a(26457),x=a(50314),m=a(71174);let h=(0,t.createContext)(void 0);function u(e){let{children:s}=e,a=(0,m.Ae)(),t=(0,m.Jr)(),r=(0,m.rX)(),l=(0,m.r_)(),i=(0,m.Ol)(),c=(0,m.bh)(),d=async()=>await a(x.FH),o=async e=>await t(e||{},x.FH),u=async e=>await r(e,x.FH),g=async()=>await l(x.FH),j=async e=>await i(e,x.FH),p=async e=>await c(e,x.FH);return(0,n.jsx)(h.Provider,{value:{getAuthToken:d,listChannels:o,getChannelHistory:u,getServerInfo:g,getPresence:j,getPresenceStats:p},children:s})}function g(){let e=(0,t.useContext)(h);if(!e)throw Error("useCentrifugoAdminApiContext must be used within CentrifugoAdminApiProvider");return e}var j=a(10200);let p=(0,t.createContext)(void 0);function b(e){let{children:s}=e,{data:a,error:t,isLoading:r,mutate:l}=(0,j.uq)(x.FH),{data:i,error:c,isLoading:d,mutate:o}=(0,j.hW)(void 0,x.FH),{data:m,error:h,isLoading:u,mutate:g}=(0,j.$x)(void 0,x.FH),{data:b,error:f,isLoading:N,mutate:v}=(0,j.XF)(void 0,x.FH),w=async()=>{await l()},y=async e=>{await o()},C=async e=>{await g()},k=async e=>{await v()};return(0,n.jsx)(p.Provider,{value:{health:a,isLoadingHealth:r,healthError:t,refreshHealth:w,overview:i,isLoadingOverview:d,overviewError:c,refreshOverview:y,timeline:m,isLoadingTimeline:u,timelineError:h,refreshTimeline:C,publishes:b,isLoadingPublishes:N,publishesError:f,refreshPublishes:k},children:s})}function f(){let e=(0,t.useContext)(p);if(!e)throw Error("useCentrifugoMonitoringContext must be used within CentrifugoMonitoringProvider");return e}var N=a(50638);let v=(0,t.createContext)(void 0);function w(e){let{children:s}=e,a=(0,N.zh)(),t=(0,N.Jr)(),r=(0,N.oD)(),l=(0,N.$0)(),i=async e=>await a(e,x.FH),c=async e=>await t(e,x.FH),d=async e=>await r(e,x.FH),o=async e=>await l(e,x.FH);return(0,n.jsx)(v.Provider,{value:{generateConnectionToken:i,publishTest:c,publishWithLogging:d,sendAck:o},children:s})}function y(){let e=(0,t.useContext)(v);if(!e)throw Error("useCentrifugoTestingContext must be used within CentrifugoTestingProvider");return e}var C=a(71964);let k=(0,t.createContext)(void 0);function A(e){let{children:s}=e,{generateConnectionToken:a,publishTest:l}=y(),[i,c]=(0,t.useState)(!1),[d,o]=(0,t.useState)(!1),[x,m]=(0,t.useState)(null),[h,u]=(0,t.useState)(null),[g,j]=(0,t.useState)([]),[p,b]=(0,t.useState)(new Map),[f,N]=(0,t.useState)(0),v=(0,t.useRef)(null),w=(0,t.useRef)(0),A=(0,t.useCallback)(e=>{j(s=>[{...e,id:"event-".concat(w.current++),timestamp:new Date},...s].slice(0,100))},[]),S=(0,t.useCallback)(async()=>{if(!v.current&&!d){o(!0),m(null);try{let e=await a({user_id:"test-user",channels:[]}),s=e.centrifugo_url,n=new C.Ft(s,{token:e.token});n.on("connected",e=>{console.log("✅ Connected to Centrifugo:",e),c(!0),o(!1),u(new Date),A({type:"connected",message:"Connected to Centrifugo server",data:e})}),n.on("disconnected",e=>{console.warn("⚠️ Disconnected from Centrifugo:",e),c(!1),o(!1),u(null),N(0),A({type:"disconnected",message:"Disconnected: ".concat(e.reason),data:e})}),n.on("error",e=>{console.error("❌ Centrifugo error:",e),m(e.error.message),A({type:"error",message:"Error: ".concat(e.error.message),data:e})}),n.connect(),v.current=n,A({type:"info",message:"Connecting to Centrifugo..."})}catch(e){console.error("Failed to connect:",e),o(!1),m(e.message),A({type:"error",message:"Connection failed: ".concat(e.message)})}}},[d,a,A]),_=(0,t.useCallback)(()=>{v.current&&(p.forEach(e=>{e.subscription.unsubscribe()}),b(new Map),v.current.disconnect(),v.current=null,c(!1),A({type:"info",message:"Disconnected from Centrifugo"}))},[p,A]),E=(0,t.useCallback)(async e=>{let s=v.current;if(!s||!i)throw Error("Not connected to Centrifugo");if(p.has(e))return void A({type:"info",channel:e,message:"Already subscribed to ".concat(e)});let a=s.newSubscription(e);a.on("subscribed",s=>{console.log("✅ Subscribed to ".concat(e,":"),s),A({type:"subscribed",channel:e,message:"Subscribed to ".concat(e),data:s})}),a.on("unsubscribed",s=>{console.log("⚠️ Unsubscribed from ".concat(e,":"),s),A({type:"unsubscribed",channel:e,message:"Unsubscribed from ".concat(e),data:s})}),a.on("publication",s=>{console.log("\uD83D\uDCE9 Message on ".concat(e,":"),s.data),N(e=>e+1),b(a=>{let n=new Map(a),t=n.get(e);return t&&(t.lastMessage=s.data,t.messageCount++),n}),A({type:"publication",channel:e,message:"Received message on ".concat(e),data:s.data})}),a.on("error",s=>{console.error("❌ Subscription error on ".concat(e,":"),s),A({type:"error",channel:e,message:"Subscription error: ".concat(s.error.message),data:s})}),a.subscribe(),b(s=>{let n=new Map(s);return n.set(e,{channel:e,subscription:a,messageCount:0}),n})},[i,p,A]),F=(0,t.useCallback)(e=>{let s=p.get(e);s&&(s.subscription.unsubscribe(),b(s=>{let a=new Map(s);return a.delete(e),a}),A({type:"info",channel:e,message:"Unsubscribed from ".concat(e)}))},[p,A]),D=(0,t.useCallback)(()=>{p.forEach(e=>{e.subscription.unsubscribe()}),b(new Map),A({type:"info",message:"Unsubscribed from all channels"})},[p,A]),M=(0,t.useCallback)(async(e,s)=>{if(!i)throw Error("Not connected to Centrifugo");await l({channel:e,data:s,wait_for_ack:!1,ack_timeout:5}),A({type:"info",channel:e,message:"Published message to ".concat(e),data:s})},[i,l,A]),P=(0,t.useCallback)(()=>{j([])},[]),L=[{id:"simple-notification",name:"Simple Notification",description:"Fire-and-forget notification to user#test-123",channel:"user#test-123",icon:"notifications",color:"blue",action:async()=>{await E("user#test-123"),await M("user#test-123",{type:"notification",title:"Test Notification",message:"This is a simple test notification"})}},{id:"ack-notification",name:"ACK Required",description:"Message with acknowledgment tracking",channel:"user#test-123",icon:"check_circle",color:"green",action:async()=>{await E("user#test-123"),await l({channel:"user#test-123",data:{type:"notification",title:"ACK Test",message:"Please acknowledge this message"},wait_for_ack:!0,ack_timeout:10})}},{id:"broadcast",name:"Team Broadcast",description:"Broadcast to team#developers channel",channel:"team#developers",icon:"campaign",color:"orange",action:async()=>{await E("team#developers"),await M("team#developers",{type:"announcement",title:"Team Update",message:"New deployment is ready!"})}}],T=(0,t.useCallback)(async e=>{if(!i)return void(0,r.oRP)({title:"Not Connected",description:"Please connect to Centrifugo first",variant:"destructive"});let s=L.find(s=>s.id===e);if(!s)return void(0,r.oRP)({title:"Scenario Not Found",description:"Scenario not found: ".concat(e),variant:"destructive"});A({type:"info",message:"Running scenario: ".concat(s.name)}),await s.action()},[i,A,L]),I={isConnected:i,isConnecting:d,connectionError:x,connectionTime:h,centrifuge:v.current,connect:S,disconnect:_,subscriptions:p,subscribe:E,unsubscribe:F,unsubscribeAll:D,publish:M,events:g,clearEvents:P,totalMessagesReceived:f,quickScenarios:L,runScenario:T};return(0,n.jsx)(k.Provider,{value:I,children:s})}function S(){let e=(0,t.useContext)(k);if(!e)throw Error("useCentrifugoLiveTestingContext must be used within CentrifugoLiveTestingProvider");return e}var _=a(47857),E=a(83322),F=a(47019);let D=()=>{let{health:e,isLoadingHealth:s,healthError:a}=f();if(s)return(0,n.jsx)(r.FcD,{children:(0,n.jsx)(r.EAD,{className:"h-4 w-full"})});if(a)return(0,n.jsxs)(r.FcD,{variant:"destructive",children:[(0,n.jsx)(_.A,{className:"h-4 w-4"}),(0,n.jsx)(r.XL1,{children:"Health Check Failed"}),(0,n.jsx)(r.TND,{children:"Unable to connect to Centrifugo monitoring service."})]});if(!e)return null;let t="healthy"===e.status;return(0,n.jsxs)(r.FcD,{variant:t?"default":"destructive",children:[t?(0,n.jsx)(E.A,{className:"h-4 w-4 text-green-600"}):(0,n.jsx)(F.A,{className:"h-4 w-4"}),(0,n.jsxs)(r.XL1,{className:"flex items-center gap-2",children:["System Status",t?(0,n.jsx)(r.Exy,{variant:"default",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Healthy"}):(0,n.jsx)(r.Exy,{variant:"destructive",children:"Issues Detected"})]}),(0,n.jsxs)(r.TND,{className:"mt-2 space-y-2",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"font-medium",children:"Wrapper URL:"}),(0,n.jsx)("span",{className:"text-sm text-muted-foreground",children:e.wrapper_url||"Not configured"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"font-medium",children:"API Key:"}),e.has_api_key?(0,n.jsx)(r.Exy,{variant:"default",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Configured"}):(0,n.jsx)(r.Exy,{variant:"destructive",children:"Not configured"})]})]}),(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Last checked: ",new Date(e.timestamp).toLocaleString()]})]})]})};var M=a(13330),P=a(80574);let L=()=>{let{overview:e,isLoadingOverview:s}=f(),a=(0,t.useMemo)(()=>{if(!e)return{total:0,successful:0,failed:0,timeout:0,successRate:0,avgDuration:0};let{total:s,successful:a,failed:n,timeout:t,success_rate:r,avg_duration_ms:l}=e;return{total:s,successful:a,failed:n+t,timeout:t,successRate:Math.round(r||0),avgDuration:Math.round(l||0)}},[e]);return s?(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,n.jsx)(r.ZpM,{children:(0,n.jsx)(r.Wux,{className:"p-6",children:(0,n.jsx)(r.EAD,{className:"h-20 w-full"})})},s))}):(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,n.jsx)(r.ZpM,{children:(0,n.jsxs)(r.Wux,{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)(M.A,{className:"h-8 w-8 text-purple-500"}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:"Today"})]}),(0,n.jsx)("h3",{className:"text-2xl font-bold mb-1",children:a.total.toLocaleString()}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Publishes"})]})}),(0,n.jsx)(r.ZpM,{children:(0,n.jsxs)(r.Wux,{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)(E.A,{className:"h-8 w-8 text-green-500"}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:"Rate"})]}),(0,n.jsxs)("h3",{className:"text-2xl font-bold mb-1",children:[a.successRate,(0,n.jsx)("span",{className:"text-lg text-muted-foreground",children:"%"})]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Success Rate"})]})}),(0,n.jsx)(r.ZpM,{children:(0,n.jsxs)(r.Wux,{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)(P.A,{className:"h-8 w-8 text-yellow-500"}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:"Average"})]}),(0,n.jsxs)("h3",{className:"text-2xl font-bold mb-1",children:[a.avgDuration,(0,n.jsx)("span",{className:"text-lg text-muted-foreground",children:"ms"})]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Avg Duration"})]})}),(0,n.jsx)(r.ZpM,{children:(0,n.jsxs)(r.Wux,{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)(_.A,{className:"h-8 w-8 text-red-500"}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:"Issues"})]}),(0,n.jsx)("h3",{className:"text-2xl font-bold mb-1",children:a.failed.toLocaleString()}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Failed/Timeout"})]})})]})};var T=a(79145),I=a(84963),O=a(69673);let R=()=>{var e;let{overview:s,timeline:a,isLoadingOverview:l,isLoadingTimeline:i}=f(),c=(0,t.useMemo)(()=>{if(!s)return{totalAcks:0,avgAcks:"0.0",ackRate:0};let e=s.avg_acks_received||0,a=s.total||0,n=Math.round(e*a);return{totalAcks:n,avgAcks:e.toFixed(1),ackRate:a>0?Math.round(e/a*100):0}},[s]);return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)(r.ZpM,{children:[(0,n.jsx)(r.aRn,{children:(0,n.jsxs)(r.ZBx,{className:"flex items-center gap-2",children:[(0,n.jsx)(T.A,{className:"h-5 w-5 text-purple-500"}),"Publish Timeline (24h)"]})}),(0,n.jsx)(r.Wux,{children:i?(0,n.jsx)(r.EAD,{className:"h-[200px] w-full"}):(0,n.jsxs)("div",{className:"h-[200px] flex items-center justify-center text-muted-foreground",children:["Chart visualization placeholder",(0,n.jsx)("br",{}),(0,n.jsxs)("span",{className:"text-xs mt-2",children:[(null==a||null==(e=a.channels)?void 0:e.length)||0," channels available"]})]})})]}),(0,n.jsxs)(r.ZpM,{children:[(0,n.jsx)(r.aRn,{children:(0,n.jsxs)(r.ZBx,{className:"flex items-center gap-2",children:[(0,n.jsx)(I.A,{className:"h-5 w-5 text-purple-500"}),"Success/Failure Breakdown"]})}),(0,n.jsx)(r.Wux,{children:l?(0,n.jsx)(r.EAD,{className:"h-[200px] w-full"}):(0,n.jsx)("div",{className:"h-[200px] flex items-center justify-center",children:(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-3xl font-bold text-green-600",children:(null==s?void 0:s.successful)||0}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Success"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-3xl font-bold text-red-600",children:((null==s?void 0:s.failed)||0)+((null==s?void 0:s.timeout)||0)}),(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Failed"})]})]})})})})]})]}),(0,n.jsxs)(r.ZpM,{children:[(0,n.jsx)(r.aRn,{children:(0,n.jsxs)(r.ZBx,{className:"flex items-center gap-2",children:[(0,n.jsx)(O.A,{className:"h-5 w-5 text-purple-500"}),"ACK Statistics"]})}),(0,n.jsx)(r.Wux,{children:l?(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[void 0,void 0,void 0].map((e,s)=>(0,n.jsx)(r.EAD,{className:"h-20 w-full"},s))}):(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsx)(r.ZpM,{children:(0,n.jsxs)(r.Wux,{className:"p-4",children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Total ACKs Received"}),(0,n.jsx)("div",{className:"text-2xl font-bold",children:c.totalAcks.toLocaleString()})]})}),(0,n.jsx)(r.ZpM,{children:(0,n.jsxs)(r.Wux,{className:"p-4",children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Avg ACKs per Publish"}),(0,n.jsx)("div",{className:"text-2xl font-bold",children:c.avgAcks})]})}),(0,n.jsx)(r.ZpM,{children:(0,n.jsxs)(r.Wux,{className:"p-4",children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"ACK Tracking Rate"}),(0,n.jsxs)("div",{className:"text-2xl font-bold",children:[c.ackRate,"%"]})]})})]})})]})]})};var H=a(51352);let B=()=>{var e,s;let{publishes:a,isLoadingPublishes:l,refreshPublishes:i}=f(),[c,d]=(0,t.useState)("all"),[o,x]=(0,t.useState)("all"),[m,h]=(0,t.useState)(0),u=(0,t.useMemo)(()=>(null==a?void 0:a.publishes)?Array.from(new Set(a.publishes.map(e=>e.channel))):[],[a]),g=()=>{i({channel:"all"!==c?c:void 0,status:"all"!==o?o:void 0,offset:m,count:50})};return(0,n.jsxs)(r.ZpM,{children:[(0,n.jsx)(r.aRn,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(r.ZBx,{children:"Recent Publishes"}),(0,n.jsxs)(r.$nd,{onClick:g,variant:"outline",size:"sm",disabled:l,children:[(0,n.jsx)(H.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),(0,n.jsxs)(r.Wux,{children:[(0,n.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4",children:[(0,n.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Filter by Channel"}),(0,n.jsxs)(r.l6P,{value:c,onValueChange:d,children:[(0,n.jsx)(r.bqE,{children:(0,n.jsx)(r.yvm,{placeholder:"All Channels"})}),(0,n.jsxs)(r.gCo,{children:[(0,n.jsx)(r.ebT,{value:"all",children:"All Channels"}),u.map(e=>(0,n.jsx)(r.ebT,{value:e,children:e},e))]})]})]}),(0,n.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Filter by Status"}),(0,n.jsxs)(r.l6P,{value:o,onValueChange:x,children:[(0,n.jsx)(r.bqE,{children:(0,n.jsx)(r.yvm,{placeholder:"All Statuses"})}),(0,n.jsxs)(r.gCo,{children:[(0,n.jsx)(r.ebT,{value:"all",children:"All Statuses"}),(0,n.jsx)(r.ebT,{value:"success",children:"Success"}),(0,n.jsx)(r.ebT,{value:"failed",children:"Failed"}),(0,n.jsx)(r.ebT,{value:"timeout",children:"Timeout"})]})]})]}),(0,n.jsx)("div",{className:"flex items-end",children:(0,n.jsx)(r.$nd,{onClick:g,children:"Apply Filters"})})]}),l?(0,n.jsx)(r.EAD,{className:"h-[400px] w-full"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.XIK,{children:[(0,n.jsx)(r.A0N,{children:(0,n.jsxs)(r.Hjg,{children:[(0,n.jsx)(r.ndF,{children:"Timestamp"}),(0,n.jsx)(r.ndF,{children:"Message ID"}),(0,n.jsx)(r.ndF,{children:"Channel"}),(0,n.jsx)(r.ndF,{children:"Status"}),(0,n.jsx)(r.ndF,{children:"ACKs"}),(0,n.jsx)(r.ndF,{children:"Duration"})]})}),(0,n.jsx)(r.BFY,{children:(null==a||null==(e=a.publishes)?void 0:e.length)===0?(0,n.jsx)(r.Hjg,{children:(0,n.jsx)(r.nA6,{colSpan:6,className:"text-center py-8 text-muted-foreground",children:"No publishes found"})}):null==a||null==(s=a.publishes)?void 0:s.map(e=>{var s;return(0,n.jsxs)(r.Hjg,{children:[(0,n.jsx)(r.nA6,{children:new Date(e.created_at).toLocaleString()}),(0,n.jsxs)(r.nA6,{className:"font-mono text-xs",children:[null==(s=e.message_id)?void 0:s.substring(0,8),"..."]}),(0,n.jsx)(r.nA6,{children:e.channel}),(0,n.jsx)(r.nA6,{children:(e=>{switch(e){case"success":return(0,n.jsx)(r.Exy,{variant:"default",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Success"});case"failed":return(0,n.jsx)(r.Exy,{variant:"destructive",children:"Failed"});case"timeout":return(0,n.jsx)(r.Exy,{variant:"secondary",children:"Timeout"});default:return(0,n.jsx)(r.Exy,{children:e})}})(e.status)}),(0,n.jsx)(r.nA6,{children:e.acks_received||0}),(0,n.jsxs)(r.nA6,{children:[e.duration_ms,"ms"]})]},e.id)})})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,n.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(null==a?void 0:a.count)||0," of ",(null==a?void 0:a.total_available)||0," publishes"]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(r.$nd,{onClick:()=>{let e=Math.max(0,m-50);h(e),i({channel:"all"!==c?c:void 0,status:"all"!==o?o:void 0,offset:e,count:50})},variant:"outline",size:"sm",disabled:0===m,children:"Previous"}),(0,n.jsx)(r.$nd,{onClick:()=>{let e=m+50;h(e),i({channel:"all"!==c?c:void 0,status:"all"!==o?o:void 0,offset:e,count:50})},variant:"outline",size:"sm",disabled:!(null==a?void 0:a.has_more),children:"Next"})]})]})]})]})]})};var Z=a(83708),G=a(73548);let z={OPEN_PUBLISH_TEST_DIALOG:"OPEN_PUBLISH_TEST_DIALOG",OPEN_PUBLISH_WITH_LOGGING_DIALOG:"OPEN_PUBLISH_WITH_LOGGING_DIALOG",OPEN_SEND_ACK_DIALOG:"OPEN_SEND_ACK_DIALOG",OPEN_CHANNEL_HISTORY_DIALOG:"OPEN_CHANNEL_HISTORY_DIALOG",OPEN_CHANNEL_PRESENCE_DIALOG:"OPEN_CHANNEL_PRESENCE_DIALOG",REFRESH_PUBLISHES:"REFRESH_PUBLISHES"},W=()=>{let{timeline:e,isLoadingTimeline:s,refreshTimeline:a}=f(),t=(null==e?void 0:e.channels)||[];return(0,n.jsxs)(r.ZpM,{children:[(0,n.jsx)(r.aRn,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(r.ZBx,{children:"Channel Statistics"}),(0,n.jsxs)(r.$nd,{onClick:()=>a(),variant:"outline",size:"sm",disabled:s,children:[(0,n.jsx)(H.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),(0,n.jsx)(r.Wux,{children:s?(0,n.jsx)(r.EAD,{className:"h-[400px] w-full"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.XIK,{children:[(0,n.jsx)(r.A0N,{children:(0,n.jsxs)(r.Hjg,{children:[(0,n.jsx)(r.ndF,{children:"Channel"}),(0,n.jsx)(r.ndF,{children:"Total Publishes"}),(0,n.jsx)(r.ndF,{children:"Success Rate"}),(0,n.jsx)(r.ndF,{children:"Avg Duration"}),(0,n.jsx)(r.ndF,{children:"Avg ACKs"}),(0,n.jsx)(r.ndF,{children:"Last Activity"}),(0,n.jsx)(r.ndF,{className:"text-right",children:"Actions"})]})}),(0,n.jsx)(r.BFY,{children:0===t.length?(0,n.jsx)(r.Hjg,{children:(0,n.jsx)(r.nA6,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:"No channel data available"})}):t.map(e=>{var s;let a=e.total>0?Math.round(e.successful/e.total*100):0;return(0,n.jsxs)(r.Hjg,{children:[(0,n.jsx)(r.nA6,{className:"font-medium",children:e.channel}),(0,n.jsx)(r.nA6,{children:e.total.toLocaleString()}),(0,n.jsxs)(r.nA6,{children:[a,"%"]}),(0,n.jsxs)(r.nA6,{children:[Math.round(e.avg_duration_ms),"ms"]}),(0,n.jsx)(r.nA6,{children:(null==(s=e.avg_acks)?void 0:s.toFixed(1))||"0.0"}),(0,n.jsx)(r.nA6,{children:e.last_activity_at?new Date(e.last_activity_at).toLocaleString():"N/A"}),(0,n.jsxs)(r.nA6,{className:"text-right space-x-2",children:[(0,n.jsx)(r.$nd,{variant:"ghost",size:"sm",onClick:()=>{var s;return s={channel:e.channel},void r.AZP.publish({type:z.OPEN_CHANNEL_HISTORY_DIALOG,payload:s})},children:(0,n.jsx)(Z.A,{className:"h-4 w-4"})}),(0,n.jsx)(r.$nd,{variant:"ghost",size:"sm",onClick:()=>{var s;return s={channel:e.channel},void r.AZP.publish({type:z.OPEN_CHANNEL_PRESENCE_DIALOG,payload:s})},children:(0,n.jsx)(G.A,{className:"h-4 w-4"})})]})]},e.channel)})})]}),(0,n.jsx)("div",{className:"mt-4 text-sm text-muted-foreground",children:"Showing statistics for the last 24 hours"})]})})]})};var K=a(74564);let U=()=>{var e;let{listChannels:s}=g(),[a,l]=(0,t.useState)(null),[i,c]=(0,t.useState)(""),[d,o]=(0,t.useState)(!1),x=async()=>{o(!0);try{let e=await s(i?{pattern:i}:void 0);l(e)}catch(e){console.error("Failed to load channels:",e)}finally{o(!1)}};return(0,n.jsxs)(r.ZpM,{children:[(0,n.jsx)(r.aRn,{children:(0,n.jsx)(r.ZBx,{children:"Live Channels"})}),(0,n.jsx)(r.Wux,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(r.pde,{placeholder:"Channel pattern (e.g., user:*)",value:i,onChange:e=>c(e.target.value),className:"flex-1"}),(0,n.jsxs)(r.$nd,{onClick:x,disabled:d,children:[(0,n.jsx)(K.A,{className:"h-4 w-4 mr-2"}),"Load Channels"]})]}),a&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Found ",(null==(e=a.channels)?void 0:e.length)||0," active channels"]}),(0,n.jsxs)(r.$nd,{onClick:x,variant:"outline",size:"sm",disabled:d,children:[(0,n.jsx)(H.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),a.channels&&a.channels.length>0?(0,n.jsxs)(r.XIK,{children:[(0,n.jsx)(r.A0N,{children:(0,n.jsxs)(r.Hjg,{children:[(0,n.jsx)(r.ndF,{children:"Channel"}),(0,n.jsx)(r.ndF,{children:"Status"})]})}),(0,n.jsx)(r.BFY,{children:a.channels.map(e=>(0,n.jsxs)(r.Hjg,{children:[(0,n.jsx)(r.nA6,{className:"font-medium",children:e}),(0,n.jsx)(r.nA6,{children:(0,n.jsx)(r.Exy,{variant:"default",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Active"})})]},e))})]}):(0,n.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No active channels found"})]}),!a&&(0,n.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:'Click "Load Channels" to view active channels'})]})})]})};var $=a(58526),V=a(57147);let X=()=>{let{quickScenarios:e,runScenario:s,isConnected:a}=S(),[l,i]=(0,t.useState)(null),c=async e=>{i(e);try{await s(e)}catch(e){console.error("Failed to run scenario:",e)}finally{i(null)}};return(0,n.jsxs)(r.ZpM,{children:[(0,n.jsx)(r.aRn,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(V.A,{className:"h-5 w-5 text-yellow-500"}),(0,n.jsx)(r.ZBx,{children:"Quick Test Scenarios"})]}),a&&(0,n.jsx)(r.Exy,{variant:"outline",className:"bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300 border-green-200 dark:border-green-800",children:"Connected"})]})}),(0,n.jsxs)(r.Wux,{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"One-click test scenarios that automatically connect, subscribe, and publish test messages."}),(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>{let s=(e=>{let s={blue:{bg:"bg-blue-50 dark:bg-blue-950/20",border:"border-blue-200 dark:border-blue-800",icon:"text-blue-500",button:"bg-blue-600 hover:bg-blue-700"},green:{bg:"bg-green-50 dark:bg-green-950/20",border:"border-green-200 dark:border-green-800",icon:"text-green-500",button:"bg-green-600 hover:bg-green-700"},orange:{bg:"bg-orange-50 dark:bg-orange-950/20",border:"border-orange-200 dark:border-orange-800",icon:"text-orange-500",button:"bg-orange-600 hover:bg-orange-700"},purple:{bg:"bg-purple-50 dark:bg-purple-950/20",border:"border-purple-200 dark:border-purple-800",icon:"text-purple-500",button:"bg-purple-600 hover:bg-purple-700"}};return s[e]||s.blue})(e.color),a=l===e.id;return(0,n.jsx)(r.ZpM,{className:"".concat(s.bg," border ").concat(s.border),children:(0,n.jsxs)(r.Wux,{className:"p-4",children:[(0,n.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h4",{className:"font-semibold mb-1",children:e.name}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})}),(0,n.jsx)("div",{className:"bg-background/50 rounded p-2 mb-3 border border-border",children:(0,n.jsxs)("code",{className:"text-xs",children:["→ Connect",(0,n.jsx)("br",{}),"→ Subscribe to ",e.channel,(0,n.jsx)("br",{}),"→ Publish message",(0,n.jsx)("br",{}),"→ Receive immediately"]})}),(0,n.jsxs)(r.$nd,{onClick:()=>c(e.id),disabled:a,className:"w-full ".concat(s.button," text-white"),size:"sm",children:[(0,n.jsx)($.A,{className:"h-4 w-4 mr-2"}),a?"Running...":"Run Scenario"]})]})},e.id)})})]})]})};var Y=a(68332),J=a(13121);let q=()=>{let{events:e,clearEvents:s}=S(),a=(0,t.useRef)(null),[i,c]=(0,t.useState)(!0),[d,o]=(0,t.useState)(""),[x,m]=(0,t.useState)([]);(0,t.useEffect)(()=>{i&&a.current&&(a.current.scrollTop=a.current.scrollHeight)},[e,i]);let h=(0,t.useMemo)(()=>{let s=[...e].reverse();if(x.length>0&&(s=s.filter(e=>x.includes(e.type))),d.trim()){let e=d.toLowerCase();s=s.filter(s=>{var a;return s.message.toLowerCase().includes(e)||(null==(a=s.channel)?void 0:a.toLowerCase().includes(e))||JSON.stringify(s.data).toLowerCase().includes(e)})}return s},[e,x,d]),u=e=>e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1});return(0,n.jsxs)(r.ZpM,{children:[(0,n.jsxs)(r.aRn,{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(l.A,{className:"h-5 w-5 text-purple-500"}),(0,n.jsx)(r.ZBx,{children:"Live Event Log"}),(0,n.jsxs)(r.Exy,{variant:"outline",children:[e.length," total"]}),h.length!==e.length&&(0,n.jsxs)(r.Exy,{variant:"outline",className:"bg-blue-50 dark:bg-blue-950/20 text-blue-700 dark:text-blue-300",children:[h.length," filtered"]})]}),(0,n.jsx)("div",{className:"flex gap-2",children:e.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.$nd,{variant:"outline",size:"sm",onClick:()=>{let e=new Blob([h.map(e=>"[".concat(u(e.timestamp),"] ").concat(e.type.toUpperCase()).concat(e.channel?" [".concat(e.channel,"]"):"",": ").concat(e.message)).join("\n")],{type:"text/plain"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="centrifugo-logs-".concat(Date.now(),".txt"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},children:[(0,n.jsx)(Y.A,{className:"h-4 w-4 mr-2"}),"Export"]}),(0,n.jsxs)(r.$nd,{variant:"outline",size:"sm",onClick:s,children:[(0,n.jsx)(J.A,{className:"h-4 w-4 mr-2"}),"Clear"]})]})})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(K.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,n.jsx)(r.pde,{placeholder:"Search events...",value:d,onChange:e=>o(e.target.value),className:"pl-9"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)(r.OY8,{type:"multiple",value:x,onValueChange:e=>{m(e)},className:"flex-wrap justify-start",children:[(0,n.jsx)(r.dzE,{value:"error",size:"sm",className:"text-xs",children:"❌ Error"}),(0,n.jsx)(r.dzE,{value:"publication",size:"sm",className:"text-xs",children:"\uD83D\uDCE9 Pub"}),(0,n.jsx)(r.dzE,{value:"connected",size:"sm",className:"text-xs",children:"\uD83D\uDFE2 Conn"}),(0,n.jsx)(r.dzE,{value:"disconnected",size:"sm",className:"text-xs",children:"\uD83D\uDD34 Disc"}),(0,n.jsx)(r.dzE,{value:"subscribed",size:"sm",className:"text-xs",children:"\uD83D\uDCE1 Sub"}),(0,n.jsx)(r.dzE,{value:"unsubscribed",size:"sm",className:"text-xs",children:"\uD83D\uDCF4 Unsub"}),(0,n.jsx)(r.dzE,{value:"info",size:"sm",className:"text-xs",children:"ℹ️ Info"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,n.jsx)(r.dOG,{id:"auto-scroll",checked:i,onCheckedChange:c}),(0,n.jsx)("label",{htmlFor:"auto-scroll",className:"text-sm text-muted-foreground whitespace-nowrap cursor-pointer",children:"Auto-scroll"})]})]})]})]}),(0,n.jsx)(r.Wux,{children:(0,n.jsx)(r.FKN,{className:"h-[400px] w-full rounded-md border border-border bg-muted/20 p-4",ref:a,children:0===h.length?(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground",children:[(0,n.jsx)(l.A,{className:"h-12 w-12 mb-2 opacity-20"}),(0,n.jsx)("p",{className:"text-sm",children:0===e.length?"No events yet. Connect to Centrifugo to see real-time events.":"No events match your filters."})]}):(0,n.jsx)("div",{className:"space-y-2 font-mono text-xs",children:h.map(e=>{let s={connected:{badge:"bg-green-100 dark:bg-green-950/50 text-green-700 dark:text-green-300 border-green-300 dark:border-green-800",icon:"\uD83D\uDFE2",text:"text-green-700 dark:text-green-300"},disconnected:{badge:"bg-red-100 dark:bg-red-950/50 text-red-700 dark:text-red-300 border-red-300 dark:border-red-800",icon:"\uD83D\uDD34",text:"text-red-700 dark:text-red-300"},subscribed:{badge:"bg-blue-100 dark:bg-blue-950/50 text-blue-700 dark:text-blue-300 border-blue-300 dark:border-blue-800",icon:"\uD83D\uDCE1",text:"text-blue-700 dark:text-blue-300"},unsubscribed:{badge:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-700",icon:"\uD83D\uDCF4",text:"text-gray-700 dark:text-gray-300"},publication:{badge:"bg-purple-100 dark:bg-purple-950/50 text-purple-700 dark:text-purple-300 border-purple-300 dark:border-purple-800",icon:"\uD83D\uDCE9",text:"text-purple-700 dark:text-purple-300"},error:{badge:"bg-red-100 dark:bg-red-950/50 text-red-700 dark:text-red-300 border-red-300 dark:border-red-800",icon:"❌",text:"text-red-700 dark:text-red-300"},info:{badge:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-700",icon:"ℹ️",text:"text-gray-700 dark:text-gray-300"}}[e.type];return(0,n.jsxs)("div",{className:"flex items-start gap-2 p-2 rounded bg-background/50 border border-border hover:bg-background/80 transition-colors",children:[(0,n.jsx)("span",{className:"text-base flex-shrink-0",children:s.icon}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,n.jsx)("span",{className:"text-muted-foreground flex-shrink-0",children:u(e.timestamp)}),(0,n.jsx)(r.Exy,{variant:"outline",className:"".concat(s.badge," text-xs flex-shrink-0"),children:e.type}),e.channel&&(0,n.jsx)(r.Exy,{variant:"outline",className:"text-xs flex-shrink-0",children:e.channel})]}),(0,n.jsx)("p",{className:"".concat(s.text," break-words"),children:e.message}),e.data&&(0,n.jsxs)("details",{className:"mt-1",children:[(0,n.jsx)("summary",{className:"cursor-pointer text-xs text-muted-foreground hover:text-foreground",children:"View data"}),(0,n.jsx)("pre",{className:"mt-1 p-2 bg-muted rounded text-[10px] overflow-x-auto",children:JSON.stringify(e.data,null,2)})]})]})]},e.id)})})})})]})};var Q=a(3032),ee=a(35685);let es=()=>{let{subscriptions:e,subscribe:s,unsubscribe:a,unsubscribeAll:l,publish:i,isConnected:c}=S(),[o,x]=(0,t.useState)(""),[m,h]=(0,t.useState)(!1),[u,g]=(0,t.useState)(null),[j,p]=(0,t.useState)({}),b=async()=>{if(o.trim()){h(!0);try{await s(o.trim()),x("")}catch(e){console.error("Failed to subscribe:",e)}finally{h(!1)}}},f=async e=>{let s=j[e]||"";if(s.trim()){g(e);try{let a;try{a=JSON.parse(s)}catch(e){a=s}await i(e,a),p(s=>({...s,[e]:""}))}catch(e){console.error("Failed to publish:",e)}finally{g(null)}}},N=Array.from(e.values());return(0,n.jsxs)(r.ZpM,{children:[(0,n.jsx)(r.aRn,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(d.A,{className:"h-5 w-5 text-blue-500"}),(0,n.jsx)(r.ZBx,{children:"Active Subscriptions"}),(0,n.jsxs)(r.Exy,{variant:"outline",children:[N.length," channels"]})]}),N.length>0&&(0,n.jsxs)(r.$nd,{variant:"outline",size:"sm",onClick:l,children:[(0,n.jsx)(J.A,{className:"h-4 w-4 mr-2"}),"Unsubscribe All"]})]})}),(0,n.jsxs)(r.Wux,{children:[(0,n.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,n.jsx)(r.pde,{placeholder:"Channel name (e.g., user#123, team#dev)",value:o,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"!==e.key||m||b()},disabled:!c||m,className:"flex-1"}),(0,n.jsxs)(r.$nd,{onClick:b,disabled:!c||m||!o.trim(),size:"sm",children:[(0,n.jsx)(Q.A,{className:"h-4 w-4 mr-2"}),"Subscribe"]})]}),!c&&(0,n.jsxs)("div",{className:"flex items-center justify-center p-6 text-muted-foreground text-sm bg-muted/20 rounded border border-border",children:[(0,n.jsx)(d.A,{className:"h-8 w-8 mr-2 opacity-20"}),(0,n.jsx)("p",{children:"Connect to Centrifugo to manage subscriptions"})]}),c&&0===N.length&&(0,n.jsxs)("div",{className:"flex items-center justify-center p-6 text-muted-foreground text-sm bg-muted/20 rounded border border-border",children:[(0,n.jsx)(ee.A,{className:"h-8 w-8 mr-2 opacity-20"}),(0,n.jsx)("p",{children:"No active subscriptions. Subscribe to a channel to start receiving messages."})]}),N.length>0&&(0,n.jsx)("div",{className:"space-y-2",children:N.map(e=>{var s;return(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 rounded border border-border bg-background/50 hover:bg-background transition-colors",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,n.jsx)(d.A,{className:"h-4 w-4 text-green-500 flex-shrink-0 animate-pulse"}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,n.jsx)("code",{className:"text-sm font-mono font-semibold truncate",children:e.channel}),(0,n.jsxs)(r.Exy,{variant:"outline",className:"text-xs flex-shrink-0",children:[e.messageCount," ",1===e.messageCount?"message":"messages"]})]}),e.lastMessage&&(0,n.jsxs)("p",{className:"text-xs text-muted-foreground truncate",children:["Last: ","string"==typeof e.lastMessage?e.lastMessage:JSON.stringify(e.lastMessage).slice(0,50),"..."]})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,n.jsxs)(r.AMh,{children:[(0,n.jsx)(r.Wvm,{asChild:!0,children:(0,n.jsx)(r.$nd,{variant:"ghost",size:"sm",children:(0,n.jsx)(M.A,{className:"h-4 w-4"})})}),(0,n.jsx)(r.hlN,{className:"w-80",children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-semibold text-sm mb-1",children:"Quick Publish"}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Send a message to ",(0,n.jsx)("code",{className:"text-xs",children:e.channel})]})]}),(0,n.jsx)(r.TMX,{placeholder:'{"type": "notification", "message": "Hello!"}',value:j[e.channel]||"",onChange:s=>p(a=>({...a,[e.channel]:s.target.value})),rows:4,className:"font-mono text-xs"}),(0,n.jsxs)(r.$nd,{onClick:()=>f(e.channel),disabled:!(null==(s=j[e.channel])?void 0:s.trim())||u===e.channel,className:"w-full",size:"sm",children:[(0,n.jsx)(M.A,{className:"h-4 w-4 mr-2"}),u===e.channel?"Sending...":"Send Message"]})]})})]}),(0,n.jsx)(r.$nd,{variant:"ghost",size:"sm",onClick:()=>{a(e.channel)},children:(0,n.jsx)(J.A,{className:"h-4 w-4"})})]})]},e.channel)})})]})]})};var ea=a(69489),en=a(53765);let et=()=>{let{isConnected:e,isConnecting:s,connectionTime:a,subscriptions:l,totalMessagesReceived:i}=S(),[c,o]=(0,t.useState)("--:--:--");return(0,t.useEffect)(()=>{if(!a||!e)return void o("--:--:--");let s=()=>{let e=Math.floor((new Date().getTime()-a.getTime())/1e3),s=Math.floor(e/3600),n=Math.floor(e%3600/60);o("".concat(s.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0")))};s();let n=setInterval(s,1e3);return()=>clearInterval(n)},[a,e]),(0,n.jsx)(r.ZpM,{children:(0,n.jsxs)(r.Wux,{className:"p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[s?(0,n.jsx)(ea.A,{className:"h-4 w-4 animate-pulse"}):e?(0,n.jsx)(ea.A,{className:"h-4 w-4"}):(0,n.jsx)(en.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"font-semibold text-sm",children:"Connection Status"})]}),(0,n.jsxs)(r.Exy,{variant:"outline",className:"".concat(e?"bg-green-50 dark:bg-green-950/20 text-green-700 dark:text-green-300 border-green-300 dark:border-green-800":"bg-red-50 dark:bg-red-950/20 text-red-700 dark:text-red-300 border-red-300 dark:border-red-800"),children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(s?"bg-yellow-500":e?"bg-green-500":"bg-red-500"," mr-2 ").concat(e?"animate-pulse":"")}),s?"Connecting...":e?"Connected":"Disconnected"]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center p-3 rounded-lg bg-muted/30 border border-border",children:[(0,n.jsx)(P.A,{className:"h-5 w-5 text-blue-500 mb-1"}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground mb-1",children:"Uptime"}),(0,n.jsx)("span",{className:"text-lg font-mono font-semibold",children:c})]}),(0,n.jsxs)("div",{className:"flex flex-col items-center p-3 rounded-lg bg-muted/30 border border-border",children:[(0,n.jsx)(ee.A,{className:"h-5 w-5 text-purple-500 mb-1"}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground mb-1",children:"Messages"}),(0,n.jsx)("span",{className:"text-lg font-mono font-semibold",children:i})]}),(0,n.jsxs)("div",{className:"flex flex-col items-center p-3 rounded-lg bg-muted/30 border border-border",children:[(0,n.jsx)(d.A,{className:"h-5 w-5 text-green-500 mb-1"}),(0,n.jsx)("span",{className:"text-xs text-muted-foreground mb-1",children:"Channels"}),(0,n.jsx)("span",{className:"text-lg font-mono font-semibold",children:l.size})]})]})]})})},er=()=>{let{isConnected:e,isConnecting:s,connect:a,disconnect:t}=S();return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,n.jsx)("div",{className:"lg:col-span-2",children:(0,n.jsx)(et,{})}),(0,n.jsx)(r.ZpM,{children:(0,n.jsxs)(r.Wux,{className:"p-4 flex flex-col items-center justify-center h-full gap-3",children:[(0,n.jsx)("p",{className:"text-sm text-center text-muted-foreground",children:e?"Connected to WebSocket server":"Start testing real-time features"}),(0,n.jsxs)(r.$nd,{onClick:e?t:a,disabled:s,variant:e?"destructive":"default",size:"lg",className:"w-full",children:[(0,n.jsx)($.A,{className:"h-4 w-4 mr-2"}),s?"Connecting...":e?"Disconnect":"Connect"]})]})})]}),(0,n.jsx)(X,{}),(0,n.jsx)(es,{}),(0,n.jsx)(q,{}),(0,n.jsxs)(r.ZpM,{children:[(0,n.jsx)(r.aRn,{children:(0,n.jsx)(r.ZBx,{children:"Advanced Testing Tools"})}),(0,n.jsx)(r.Wux,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsx)(r.ZpM,{children:(0,n.jsxs)(r.Wux,{className:"p-6",children:[(0,n.jsx)(M.A,{className:"h-8 w-8 text-purple-500 mb-4"}),(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Publish Test"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Send a test message to a channel with optional ACK tracking"}),(0,n.jsx)(r.$nd,{onClick:()=>{r.AZP.publish({type:z.OPEN_PUBLISH_TEST_DIALOG,payload:{}})},className:"w-full",children:"Open Test Publisher"})]})}),(0,n.jsx)(r.ZpM,{children:(0,n.jsxs)(r.Wux,{className:"p-6",children:[(0,n.jsx)(c.A,{className:"h-8 w-8 text-blue-500 mb-4"}),(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Publish with Logging"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Send a message and save to database for tracking"}),(0,n.jsx)(r.$nd,{onClick:()=>{r.AZP.publish({type:z.OPEN_PUBLISH_WITH_LOGGING_DIALOG,payload:{}})},className:"w-full",children:"Open Logger"})]})}),(0,n.jsx)(r.ZpM,{children:(0,n.jsxs)(r.Wux,{className:"p-6",children:[(0,n.jsx)(E.A,{className:"h-8 w-8 text-green-500 mb-4"}),(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Send ACK"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Manually send acknowledgment for a message"}),(0,n.jsx)(r.$nd,{onClick:()=>{r.AZP.publish({type:z.OPEN_SEND_ACK_DIALOG,payload:{}})},className:"w-full",children:"Send ACK"})]})})]})})]}),(0,n.jsxs)(r.ZpM,{children:[(0,n.jsx)(r.aRn,{children:(0,n.jsx)(r.ZBx,{children:"Usage Guide"})}),(0,n.jsx)(r.Wux,{children:(0,n.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-semibold mb-2",children:"Live Testing"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Connect to the WebSocket server to test real-time features. Use Quick Scenarios for one-click testing, or manually subscribe to channels and publish messages. All events are logged in real-time for debugging."})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-semibold mb-2",children:"Publish Test"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Use this tool to send test messages to specific channels. You can enable ACK tracking to monitor message delivery confirmations."})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-semibold mb-2",children:"Publish with Logging"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Similar to Publish Test, but creates a CentrifugoLog record in the database for persistent tracking and monitoring."})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-semibold mb-2",children:"Send ACK"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Manually send an acknowledgment for a specific message. Useful for testing ACK handling and debugging delivery issues."})]})]})})]})]})},el=()=>(0,n.jsx)(A,{children:(0,n.jsx)(er,{})});var ei=a(19140),ec=a(91416),ed=a(23309);let eo=ed.Ikc({channel:ed.YjP().min(1,"Channel is required"),message:ed.YjP().min(1,"Message is required"),wait_for_ack:ed.zMY().optional(),ack_timeout:ed.aig().int().min(1).max(60).optional()}),ex=()=>{let[e,s]=t.useState(!1),{publishTest:a}=y(),{refreshPublishes:l,refreshOverview:i}=f(),{toast:c}=(0,r.djX)(),d=(0,ei.mN)({resolver:(0,ec.u)(eo),defaultValues:{channel:"",message:'{"type": "test", "content": "Hello from admin"}',wait_for_ack:!1,ack_timeout:5}});(0,r.MLh)(z.OPEN_PUBLISH_TEST_DIALOG,e=>{var a,n;(null==(a=e.payload)?void 0:a.channel)&&d.setValue("channel",e.payload.channel),(null==(n=e.payload)?void 0:n.message)&&d.setValue("message",JSON.stringify(e.payload.message,null,2)),s(!0)});let o=()=>{s(!1),d.reset()},m=async e=>{try{let s={message:e.message};try{let a=JSON.parse(e.message);s="object"==typeof a&&null!==a?a:{message:a}}catch(e){}await a({channel:e.channel,data:s,wait_for_ack:e.wait_for_ack,ack_timeout:e.ack_timeout}),c({title:"Message Published",description:'Successfully published to channel "'.concat(e.channel,'"')}),await l(),await i(),o()}catch(a){let e="Publishing Failed",s="Failed to publish message";a instanceof x.LG?a.isPermissionError?(e="Permission Denied",s=a.errorMessage||"You do not have permission to publish messages"):a.isAuthError?(e="Authentication Required",s="Please log in to publish messages"):a.isValidationError?(e="Validation Error",s=a.errorMessage):a.isServerError?(e="Server Error",s=a.errorMessage||"Internal server error occurred"):s=a.errorMessage:a instanceof Error&&(s=a.message),c({title:e,description:s,variant:"destructive"})}};return(0,n.jsx)(r.lGe,{open:e,onOpenChange:e=>!e&&o(),children:(0,n.jsxs)(r.Cff,{className:"max-w-2xl",children:[(0,n.jsxs)(r.c75,{children:[(0,n.jsx)(r.L33,{children:"Publish Test Message"}),(0,n.jsx)(r.rrK,{children:"Publish a test message to a Centrifugo channel via the wrapper"})]}),(0,n.jsx)(r.lVW,{...d,children:(0,n.jsxs)("form",{onSubmit:d.handleSubmit(m),className:"space-y-4",children:[(0,n.jsx)(r.zBI,{control:d.control,name:"channel",render:e=>{let{field:s}=e;return(0,n.jsxs)(r.eIh,{children:[(0,n.jsx)(r.lRv,{children:"Channel *"}),(0,n.jsx)(r.MJN,{children:(0,n.jsx)(r.pde,{placeholder:"test:channel",...s})}),(0,n.jsx)(r.Rrd,{children:'Target channel name (e.g., "test:channel")'}),(0,n.jsx)(r.C5h,{})]})}}),(0,n.jsx)(r.zBI,{control:d.control,name:"message",render:e=>{let{field:s}=e;return(0,n.jsxs)(r.eIh,{children:[(0,n.jsx)(r.lRv,{children:"Message *"}),(0,n.jsx)(r.MJN,{children:(0,n.jsx)(r.TMX,{placeholder:'{"type": "test", "content": "Hello"}',rows:6,...s})}),(0,n.jsx)(r.Rrd,{children:"JSON object or string (will be auto-wrapped if needed)"}),(0,n.jsx)(r.C5h,{})]})}}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(r.zBI,{control:d.control,name:"wait_for_ack",render:e=>{let{field:s}=e;return(0,n.jsxs)(r.eIh,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)(r.lRv,{children:"Wait for ACK"}),(0,n.jsx)(r.Rrd,{className:"text-xs",children:"Track client acknowledgments"})]}),(0,n.jsx)(r.MJN,{children:(0,n.jsx)(r.dOG,{checked:s.value,onCheckedChange:s.onChange})})]})}}),(0,n.jsx)(r.zBI,{control:d.control,name:"ack_timeout",render:e=>{let{field:s}=e;return(0,n.jsxs)(r.eIh,{children:[(0,n.jsx)(r.lRv,{children:"ACK Timeout (seconds)"}),(0,n.jsx)(r.MJN,{children:(0,n.jsx)(r.pde,{type:"number",min:"1",max:"60",...s,onChange:e=>s.onChange(parseInt(e.target.value)||5)})}),(0,n.jsx)(r.C5h,{})]})}})]}),(0,n.jsxs)(r.Esm,{children:[(0,n.jsx)(r.$nd,{type:"button",variant:"outline",onClick:o,children:"Cancel"}),(0,n.jsx)(r.$nd,{type:"submit",disabled:d.formState.isSubmitting,children:d.formState.isSubmitting?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Publishing..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.A,{className:"h-4 w-4 mr-2"}),"Publish"]})})]})]})})]})})};var em=a(80069),eh=a(20495);let eu=ed.Ikc({channel:ed.YjP().min(1,"Channel is required"),data:ed.YjP().min(1,"Message data is required"),wait_for_ack:ed.zMY().optional(),ack_timeout:ed.aig().int().min(1).max(60).optional()}),eg=()=>{let[e,s]=t.useState(!1),{publishWithLogging:a}=y(),{refreshPublishes:l,refreshOverview:i}=f(),{toast:d}=(0,eh.dj)(),o=(0,ei.mN)({resolver:(0,ec.u)(eu),defaultValues:{channel:"",data:"{}",wait_for_ack:!0,ack_timeout:5}});(0,eh.ML)(z.OPEN_PUBLISH_WITH_LOGGING_DIALOG,e=>{var a,n;(null==(a=e.payload)?void 0:a.channel)&&o.setValue("channel",e.payload.channel),(null==(n=e.payload)?void 0:n.message)&&o.setValue("data",JSON.stringify(e.payload.message,null,2)),s(!0)});let m=()=>{s(!1),o.reset()},h=async e=>{try{let s={};try{let a=JSON.parse(e.data);s="object"==typeof a&&null!==a?a:{message:a}}catch(a){s={message:e.data}}await a({channel:e.channel.trim(),data:s,wait_for_ack:e.wait_for_ack,ack_timeout:e.ack_timeout}),d({title:"Success",description:"Message published to ".concat(e.channel," and saved to database")}),r.AZP.publish({type:z.REFRESH_PUBLISHES,payload:{}}),await l(),await i(),m()}catch(a){let e="Publishing Failed",s="Failed to publish message";a instanceof x.LG?a.isPermissionError?(e="Permission Denied",s=a.errorMessage||"You do not have permission to publish messages"):a.isAuthError?(e="Authentication Required",s="Please log in to publish messages"):a.isValidationError?(e="Validation Error",s=a.errorMessage):a.isServerError?(e="Server Error",s=a.errorMessage||"Internal server error occurred"):s=a.errorMessage:a instanceof Error&&(s=a.message),d({title:e,description:s,variant:"destructive"})}};return(0,n.jsx)(em.Dialog,{open:e,onOpenChange:e=>!e&&m(),children:(0,n.jsxs)(em.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,n.jsxs)(em.DialogHeader,{children:[(0,n.jsx)(em.DialogTitle,{children:"Publish with Database Logging"}),(0,n.jsx)(em.DialogDescription,{children:"Publish a message and save it to the database for tracking"})]}),(0,n.jsx)(em.Form,{...o,children:(0,n.jsxs)("form",{onSubmit:o.handleSubmit(h),className:"space-y-6",children:[(0,n.jsx)(em.FormField,{control:o.control,name:"channel",render:e=>{let{field:s}=e;return(0,n.jsxs)(em.FormItem,{children:[(0,n.jsx)(em.FormLabel,{children:"Channel *"}),(0,n.jsx)(em.FormControl,{children:(0,n.jsx)(em.Input,{placeholder:"e.g., user:123",...s})}),(0,n.jsx)(em.FormDescription,{children:"The channel to publish the message to"}),(0,n.jsx)(em.FormMessage,{})]})}}),(0,n.jsx)(em.FormField,{control:o.control,name:"data",render:e=>{let{field:s}=e;return(0,n.jsxs)(em.FormItem,{children:[(0,n.jsx)(em.FormLabel,{children:"Message Data (JSON)"}),(0,n.jsx)(em.FormControl,{children:(0,n.jsx)(em.Textarea,{placeholder:'{"type": "notification", "message": "Test"}',rows:8,className:"font-mono text-sm",...s})}),(0,n.jsx)(em.FormDescription,{children:"Enter JSON data or plain text (will be auto-wrapped)"}),(0,n.jsx)(em.FormMessage,{})]})}}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("h3",{className:"text-sm font-medium",children:"ACK Options"}),(0,n.jsx)(em.FormField,{control:o.control,name:"wait_for_ack",render:e=>{let{field:s}=e;return(0,n.jsxs)(em.FormItem,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)(em.FormLabel,{children:"Wait for ACK"}),(0,n.jsx)(em.FormDescription,{children:"Track acknowledgment responses from subscribers"})]}),(0,n.jsx)(em.FormControl,{children:(0,n.jsx)(em.Switch,{checked:s.value,onCheckedChange:s.onChange})})]})}}),o.watch("wait_for_ack")&&(0,n.jsx)(em.FormField,{control:o.control,name:"ack_timeout",render:e=>{let{field:s}=e;return(0,n.jsxs)(em.FormItem,{children:[(0,n.jsx)(em.FormLabel,{children:"ACK Timeout (seconds)"}),(0,n.jsx)(em.FormControl,{children:(0,n.jsx)(em.Input,{type:"number",min:1,max:60,...s,onChange:e=>s.onChange(parseInt(e.target.value)||5)})}),(0,n.jsx)(em.FormDescription,{children:"Maximum time to wait for acknowledgments (1-60 seconds)"}),(0,n.jsx)(em.FormMessage,{})]})}})]}),(0,n.jsxs)(em.DialogFooter,{children:[(0,n.jsx)(em.Button,{type:"button",variant:"outline",onClick:m,children:"Cancel"}),(0,n.jsx)(em.Button,{type:"submit",disabled:o.formState.isSubmitting,children:o.formState.isSubmitting?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Publishing..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Publish & Log"]})})]})]})})]})})};var ej=a(98315);let ep=()=>{let[e,s]=t.useState(!1),{sendAck:a}=y(),{toast:r}=(0,eh.dj)(),l=(0,ei.mN)({resolver:(0,ec.u)(ej.R),defaultValues:{message_id:"",client_id:""}});(0,eh.ML)(z.OPEN_SEND_ACK_DIALOG,e=>{var a,n;(null==(a=e.payload)?void 0:a.messageId)&&l.setValue("message_id",e.payload.messageId),(null==(n=e.payload)?void 0:n.channel)&&l.setValue("client_id",e.payload.channel),s(!0)});let i=()=>{s(!1),l.reset()},c=async e=>{try{await a({message_id:e.message_id.trim(),client_id:e.client_id.trim()}),r({title:"Success",description:"ACK sent for message ".concat(e.message_id)}),i()}catch(a){let e="Failed to Send ACK",s="Failed to send acknowledgment";a instanceof x.LG?a.isPermissionError?(e="Permission Denied",s=a.errorMessage||"You do not have permission to send ACKs"):a.isAuthError?(e="Authentication Required",s="Please log in to send ACKs"):a.isValidationError?(e="Validation Error",s=a.errorMessage):a.isServerError?(e="Server Error",s=a.errorMessage||"Internal server error occurred"):s=a.errorMessage:a instanceof Error&&(s=a.message),r({title:e,description:s,variant:"destructive"})}};return(0,n.jsx)(em.Dialog,{open:e,onOpenChange:e=>!e&&i(),children:(0,n.jsxs)(em.DialogContent,{className:"max-w-lg",children:[(0,n.jsxs)(em.DialogHeader,{children:[(0,n.jsx)(em.DialogTitle,{children:"Send Manual ACK"}),(0,n.jsx)(em.DialogDescription,{children:"Manually send acknowledgment for a specific message"})]}),(0,n.jsx)(em.Form,{...l,children:(0,n.jsxs)("form",{onSubmit:l.handleSubmit(c),className:"space-y-6",children:[(0,n.jsx)(em.FormField,{control:l.control,name:"message_id",render:e=>{let{field:s}=e;return(0,n.jsxs)(em.FormItem,{children:[(0,n.jsx)(em.FormLabel,{children:"Message ID *"}),(0,n.jsx)(em.FormControl,{children:(0,n.jsx)(em.Input,{placeholder:"Enter message ID",className:"font-mono",...s})}),(0,n.jsx)(em.FormDescription,{children:"The unique identifier of the message to acknowledge"}),(0,n.jsx)(em.FormMessage,{})]})}}),(0,n.jsx)(em.FormField,{control:l.control,name:"client_id",render:e=>{let{field:s}=e;return(0,n.jsxs)(em.FormItem,{children:[(0,n.jsx)(em.FormLabel,{children:"Client ID *"}),(0,n.jsx)(em.FormControl,{children:(0,n.jsx)(em.Input,{placeholder:"e.g., client-123",className:"font-mono",...s})}),(0,n.jsx)(em.FormDescription,{children:"The client ID that should acknowledge the message"}),(0,n.jsx)(em.FormMessage,{})]})}}),(0,n.jsxs)(em.DialogFooter,{children:[(0,n.jsx)(em.Button,{type:"button",variant:"outline",onClick:i,children:"Cancel"}),(0,n.jsx)(em.Button,{type:"submit",disabled:l.formState.isSubmitting,children:l.formState.isSubmitting?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Sending..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.A,{className:"h-4 w-4 mr-2"}),"Send ACK"]})})]})]})})]})})},eb=()=>{let[e,s]=t.useState(!1),[a,r]=t.useState(""),[l,i]=t.useState(null),[c,d]=t.useState(!1),{getChannelHistory:o}=g(),{toast:m}=(0,eh.dj)();(0,eh.ML)(z.OPEN_CHANNEL_HISTORY_DIALOG,async e=>{r(e.payload.channel),s(!0),await h(e.payload.channel)});let h=async e=>{d(!0),i(null);try{let s=await o({channel:e});i(s)}catch(n){let s="Failed to Load History",a="Failed to load channel history";n instanceof x.LG?n.isPermissionError?(s="Permission Denied",a=n.errorMessage||"You do not have permission to view channel history"):n.isAuthError?(s="Authentication Required",a="Please log in to view channel history"):n.isNotFoundError?(s="Channel Not Found",a='Channel "'.concat(e,'" not found or has no history')):n.isServerError?(s="Server Error",a=n.errorMessage||"Internal server error occurred"):a=n.errorMessage:n instanceof Error&&(a=n.message),m({title:s,description:a,variant:"destructive"})}finally{d(!1)}},u=()=>{s(!1),r(""),i(null)};return(0,n.jsx)(em.Dialog,{open:e,onOpenChange:e=>!e&&u(),children:(0,n.jsxs)(em.DialogContent,{className:"max-w-6xl max-h-[90vh]",children:[(0,n.jsxs)(em.DialogHeader,{children:[(0,n.jsxs)(em.DialogTitle,{className:"flex items-center gap-2",children:[(0,n.jsx)(Z.A,{className:"h-5 w-5"}),"Channel History: ",a,(null==l?void 0:l.publications)&&(0,n.jsxs)(em.Badge,{variant:"secondary",children:[l.publications.length," messages"]})]}),(0,n.jsx)(em.DialogDescription,{children:"View message history for this channel"})]}),(0,n.jsx)(em.ScrollArea,{className:"h-[60vh] w-full",children:c?(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)(em.Skeleton,{className:"h-[100px] w-full"}),(0,n.jsx)(em.Skeleton,{className:"h-[100px] w-full"}),(0,n.jsx)(em.Skeleton,{className:"h-[100px] w-full"})]}):(null==l?void 0:l.publications)&&l.publications.length>0?(0,n.jsxs)(em.Table,{children:[(0,n.jsx)(em.TableHeader,{children:(0,n.jsxs)(em.TableRow,{children:[(0,n.jsx)(em.TableHead,{className:"w-[100px]",children:"Offset"}),(0,n.jsx)(em.TableHead,{children:"Data"}),(0,n.jsx)(em.TableHead,{className:"w-[200px]",children:"Info"})]})}),(0,n.jsx)(em.TableBody,{children:l.publications.map((e,s)=>(0,n.jsxs)(em.TableRow,{children:[(0,n.jsx)(em.TableCell,{className:"font-mono text-xs align-top",children:e.offset||"N/A"}),(0,n.jsx)(em.TableCell,{className:"align-top",children:(0,n.jsx)("pre",{className:"text-xs bg-muted p-3 rounded-md overflow-x-auto max-w-2xl",children:JSON.stringify(e.data,null,2)})}),(0,n.jsx)(em.TableCell,{className:"text-xs align-top",children:e.info?(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{className:"font-semibold",children:"Client:"}),(0,n.jsx)("code",{className:"text-xs bg-muted px-1 rounded",children:e.info.client||"N/A"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{className:"font-semibold",children:"User:"}),(0,n.jsx)("code",{className:"text-xs bg-muted px-1 rounded",children:e.info.user||"N/A"})]})]}):(0,n.jsx)("span",{className:"text-muted-foreground",children:"No info"})})]},s))})]}):(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,n.jsx)(Z.A,{className:"h-12 w-12 text-muted-foreground mb-3"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"No history available for this channel"})]})}),(0,n.jsxs)(em.DialogFooter,{children:[(0,n.jsx)(em.Button,{variant:"outline",onClick:()=>{a&&h(a)},disabled:c,children:c?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})}),(0,n.jsx)(em.Button,{variant:"outline",onClick:u,children:"Close"})]})]})})},ef=()=>{let[e,s]=t.useState(!1),[a,r]=t.useState(""),[l,i]=t.useState(null),[c,d]=t.useState(!1),{getPresence:o}=g(),{toast:m}=(0,eh.dj)();(0,eh.ML)(z.OPEN_CHANNEL_PRESENCE_DIALOG,async e=>{r(e.payload.channel),s(!0),await h(e.payload.channel)});let h=async e=>{d(!0),i(null);try{let s=await o({channel:e});i(s)}catch(n){let s="Failed to Load Presence",a="Failed to load channel presence";n instanceof x.LG?n.isPermissionError?(s="Permission Denied",a=n.errorMessage||"You do not have permission to view channel presence"):n.isAuthError?(s="Authentication Required",a="Please log in to view channel presence"):n.isNotFoundError?(s="Channel Not Found",a='Channel "'.concat(e,'" not found')):n.isServerError?(s="Server Error",a=n.errorMessage||"Internal server error occurred"):a=n.errorMessage:n instanceof Error&&(a=n.message),m({title:s,description:a,variant:"destructive"})}finally{d(!1)}},u=()=>{s(!1),r(""),i(null)},j=(null==l?void 0:l.presence)?Object.keys(l.presence).length:0;return(0,n.jsx)(em.Dialog,{open:e,onOpenChange:e=>!e&&u(),children:(0,n.jsxs)(em.DialogContent,{className:"max-w-5xl max-h-[90vh]",children:[(0,n.jsxs)(em.DialogHeader,{children:[(0,n.jsxs)(em.DialogTitle,{className:"flex items-center gap-2",children:[(0,n.jsx)(G.A,{className:"h-5 w-5"}),"Channel Presence: ",a,l&&(0,n.jsxs)(em.Badge,{variant:"secondary",children:[j," ",1===j?"client":"clients"]})]}),(0,n.jsx)(em.DialogDescription,{children:"View currently subscribed clients for this channel"})]}),(0,n.jsx)(em.ScrollArea,{className:"h-[60vh] w-full",children:c?(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)(em.Skeleton,{className:"h-[80px] w-full"}),(0,n.jsx)(em.Skeleton,{className:"h-[80px] w-full"}),(0,n.jsx)(em.Skeleton,{className:"h-[80px] w-full"})]}):(null==l?void 0:l.presence)&&Object.keys(l.presence).length>0?(0,n.jsxs)(em.Table,{children:[(0,n.jsx)(em.TableHeader,{children:(0,n.jsxs)(em.TableRow,{children:[(0,n.jsx)(em.TableHead,{className:"w-[250px]",children:"Client ID"}),(0,n.jsx)(em.TableHead,{className:"w-[150px]",children:"User"}),(0,n.jsx)(em.TableHead,{children:"Connection Info"})]})}),(0,n.jsx)(em.TableBody,{children:Object.entries(l.presence).map(e=>{let[s,a]=e;return(0,n.jsxs)(em.TableRow,{children:[(0,n.jsx)(em.TableCell,{className:"font-mono text-xs align-top",children:(0,n.jsx)("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:s})}),(0,n.jsx)(em.TableCell,{className:"align-top",children:(0,n.jsx)(em.Badge,{variant:"outline",children:a.user||"Anonymous"})}),(0,n.jsx)(em.TableCell,{className:"text-xs align-top",children:a.conn_info?(0,n.jsx)("pre",{className:"text-xs bg-muted p-3 rounded-md overflow-x-auto max-w-xl",children:JSON.stringify(a.conn_info,null,2)}):(0,n.jsx)("span",{className:"text-muted-foreground",children:"No connection info"})})]},s)})})]}):(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,n.jsx)(G.A,{className:"h-12 w-12 text-muted-foreground mb-3"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"No clients currently subscribed to this channel"})]})}),(0,n.jsxs)(em.DialogFooter,{children:[(0,n.jsx)(em.Button,{variant:"outline",onClick:()=>{a&&h(a)},disabled:c,children:c?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(H.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})}),(0,n.jsx)(em.Button,{variant:"outline",onClick:u,children:"Close"})]})]})})},eN=()=>{let[e,s]=(0,t.useState)("overview");return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)(D,{}),(0,n.jsx)(L,{}),(0,n.jsxs)(r.ZpM,{children:[(0,n.jsx)(r.aRn,{children:(0,n.jsx)(r.ZBx,{children:"Centrifugo Monitor Dashboard"})}),(0,n.jsx)(r.Wux,{children:(0,n.jsxs)(r.tUM,{value:e,onValueChange:e=>s(e),children:[(0,n.jsxs)(r.j7C,{className:"grid w-full grid-cols-5",children:[(0,n.jsxs)(r.Xib,{value:"overview",className:"flex items-center gap-2",children:[(0,n.jsx)(l.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Overview"})]}),(0,n.jsxs)(r.Xib,{value:"publishes",className:"flex items-center gap-2",children:[(0,n.jsx)(i.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Recent Publishes"})]}),(0,n.jsxs)(r.Xib,{value:"channels",className:"flex items-center gap-2",children:[(0,n.jsx)(c.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Channels"})]}),(0,n.jsxs)(r.Xib,{value:"live-channels",className:"flex items-center gap-2",children:[(0,n.jsx)(d.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Live Channels"})]}),(0,n.jsxs)(r.Xib,{value:"testing",className:"flex items-center gap-2",children:[(0,n.jsx)(o.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Live Testing"})]})]}),(0,n.jsx)(r.avX,{value:"overview",className:"mt-6",children:(0,n.jsx)(R,{})}),(0,n.jsx)(r.avX,{value:"publishes",className:"mt-6",children:(0,n.jsx)(B,{})}),(0,n.jsx)(r.avX,{value:"channels",className:"mt-6",children:(0,n.jsx)(W,{})}),(0,n.jsx)(r.avX,{value:"live-channels",className:"mt-6",children:(0,n.jsx)(U,{})}),(0,n.jsx)(r.avX,{value:"testing",className:"mt-6",children:(0,n.jsx)(el,{})})]})})]}),(0,n.jsx)(ex,{}),(0,n.jsx)(eg,{}),(0,n.jsx)(ep,{}),(0,n.jsx)(eb,{}),(0,n.jsx)(ef,{})]})},ev=()=>(0,n.jsx)(b,{children:(0,n.jsx)(u,{children:(0,n.jsx)(w,{children:(0,n.jsx)(eN,{})})})}),ew=()=>(0,n.jsx)(ev,{});ew.pageConfig={title:"Centrifugo Monitor",description:"Real-time monitoring and management interface for Centrifugo",protected:!0};let ey=ew}},e=>{e.O(0,[43076,50314,90636,46593,38792],()=>e(e.s=48747)),_N_E=e.O()}]);