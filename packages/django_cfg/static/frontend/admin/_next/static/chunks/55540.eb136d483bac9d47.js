"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7819,55540],{7819:(t,i,e)=>{e.r(i),e.d(i,{VideoProvider:()=>u});var s=e(8334),h=e(47707),r=e(83298);class a{constructor(t,i){this.qa=t,this.ph=i,t.textTracks.onaddtrack=this.va.bind(this),(0,s.zp)(this.Eh.bind(this))}va(t){var i,e;let s=t.track;if(!s||(i=this.qa,e=s,Array.from(i.children).find(t=>t.track===e)))return;let r=new h.G({id:s.id,kind:s.kind,label:s.label,language:s.language,type:"vtt"});r[h.Y]={track:s},r[h.H]=2,r[h.Z]=!0;let a=0,n=t=>{if(s.cues)for(let i=a;i<s.cues.length;i++)r.addCue(s.cues[i],t),a++};n(t),s.oncuechange=n,this.ph.textTracks.add(r,t),r.setMode(s.mode,t)}Eh(){for(let t of(this.qa.textTracks.onaddtrack=null,this.ph.textTracks)){let i=t[h.Y]?.track;i?.oncuechange&&(i.oncuechange=null)}}}var n=e(60140);class d{constructor(t,i){this.qa=t,this.j=i,(0,n.k6)(this.qa,"enterpictureinpicture",this.Fh.bind(this)),(0,n.k6)(this.qa,"leavepictureinpicture",this.Gh.bind(this))}get active(){return document.pictureInPictureElement===this.qa}get supported(){return(0,h._)(this.qa)}async enter(){return this.qa.requestPictureInPicture()}exit(){return document.exitPictureInPicture()}Fh(t){this.Hc(!0,t)}Gh(t){this.Hc(!1,t)}Hc=(t,i)=>{this.j.delegate.p("picture-in-picture-change",{detail:t,trigger:i})}}class l{constructor(t,i){this.qa=t,this.j=i,(0,n.k6)(this.qa,"webkitpresentationmodechanged",this.Kh.bind(this))}Ga="inline";get Jh(){return(0,h.$)(this.qa)}async Ih(t){this.Ga!==t&&this.qa.webkitSetPresentationMode(t)}Kh(){let t=this.Ga;this.Ga=this.qa.webkitPresentationMode,this.j.player?.dispatchEvent(new n.vP("video-presentation-change",{detail:this.Ga,trigger:event})),["fullscreen","picture-in-picture"].forEach(i=>{(this.Ga===i||t===i)&&this.j.delegate.p(`${i}-change`,{detail:this.Ga===i,trigger:event})})}}class o{constructor(t){this.Hh=t}get active(){return"fullscreen"===this.Hh.Ga}get supported(){return this.Hh.Jh}async enter(){this.Hh.Ih("fullscreen")}async exit(){this.Hh.Ih("inline")}}class c{constructor(t){this.Hh=t}get active(){return"picture-in-picture"===this.Hh.Ga}get supported(){return this.Hh.Jh}async enter(){this.Hh.Ih("picture-in-picture")}async exit(){this.Hh.Ih("inline")}}class u extends r.H{$$PROVIDER_TYPE="VIDEO";get type(){return"video"}fullscreen;pictureInPicture;constructor(t,i){if(super(t),(0,h.$)(t)){let e=new l(t,i);this.fullscreen=new o(e),this.pictureInPicture=new c(e)}else(0,h._)(t)&&(this.pictureInPicture=new d(t,i))}setup(t){super.setup(t),(0,h.X)(this.video)&&new a(this.video,t),t.textRenderers[h.a0](this.video),(0,s.zp)(()=>{t.textRenderers[h.a0](null)}),"video"===this.type&&t.delegate.p("provider-setup",{detail:this})}get video(){return this.j}}},55540:(t,i,e)=>{e.r(i),e.d(i,{HLSProvider:()=>u});var s=e(8334),h=e(52598),r=e(47707),a=e(7819),n=e(88347),d=e(60140);class l{constructor(t,i,e){this.Bh=t,this.ph=i,this.jf=e,this.Ch()}async Ch(){let t={onLoadStart:this.ge.bind(this),onLoaded:this.ue.bind(this),onLoadError:this.Dh.bind(this)},i=await c(this.Bh,t);return((0,h.b0)(i)&&!(0,h.Kg)(this.Bh)&&(i=await o(this.Bh,t)),i)?i.isSupported()?i:(this.ph.player.dispatchEvent(new d.vP("hls-unsupported")),this.ph.delegate.p("error",{detail:{message:"[vidstack]: `hls.js` is not supported in this environment",code:4}}),null):null}ge(){this.ph.player.dispatchEvent(new d.vP("hls-lib-load-start"))}ue(t){this.ph.player.dispatchEvent(new d.vP("hls-lib-loaded",{detail:t})),this.jf(t)}Dh(t){let i=(0,r.Q)(t);this.ph.player.dispatchEvent(new d.vP("hls-lib-load-error",{detail:i})),this.ph.delegate.p("error",{detail:{message:i.message,code:4}})}}async function o(t,i={}){if(!(0,h.b0)(t)){if(i.onLoadStart?.(),t.prototype&&t.prototype!==Function)return i.onLoaded?.(t),t;try{let e=(await t())?.default;if(e&&e.isSupported)i.onLoaded?.(e);else throw Error("");return e}catch(t){i.onLoadError?.(t)}}}async function c(t,i={}){if((0,h.Kg)(t)){i.onLoadStart?.();try{if(await (0,r.R)(t),!(0,h.Tn)(window.Hls))throw Error("");let e=window.Hls;return i.onLoaded?.(e),e}catch(t){i.onLoadError?.(t)}}}class u extends a.VideoProvider{$$PROVIDER_TYPE="HLS";mh=null;od=new n.H(this.video);get ctor(){return this.mh}get instance(){return this.od.instance}static supported=(0,r.U)();get type(){return"hls"}get canLiveSync(){return!0}lh="https://cdn.jsdelivr.net/npm/hls.js@^1.0.0/dist/hls.min.js";get config(){return this.od.nh}set config(t){this.od.nh=t}get library(){return this.lh}set library(t){this.lh=t}preconnect(){(0,h.Kg)(this.lh)&&(0,r.p)(this.lh)}setup(t){super.setup(t),new l(this.lh,t,i=>{this.mh=i,this.od.setup(i,t),t.delegate.p("provider-setup",{detail:this});let e=(0,s.se)(t.$store.source);e&&this.loadSource(e)})}async loadSource({src:t}){(0,h.Kg)(t)&&this.od.instance?.loadSource(t)}onInstance(t){let i=this.od.instance;return i&&t(i),this.od.oh.add(t),()=>this.od.oh.delete(t)}destroy(){this.od.Jg()}}},83298:(t,i,e)=>{e.d(i,{H:()=>p});var s=e(60140),h=e(52598),r=e(56708),a=e(8334),n=e(88972),d=e(88347),l=e(95713),o=e(47707);class c{constructor(t,i){this.q=t,this.ph=i,this.Uh(),(0,h.QZ)(this.Vh.bind(this)),(0,a.zp)(this.Eh.bind(this))}ih=(0,n.EH)();Nh=!1;Qh=!1;Rh=!1;Oh=new d.R(this.Wh.bind(this));get j(){return this.q.media}get jg(){return this.ph.delegate}Eh(){this.Oh.P(),this.ih.empty()}Wh(){let t=this.q.currentTime;this.ph.$store.currentTime()!==t&&this.Mh(t)}Uh(){this.Lh("loadstart",this.ge),this.Lh("abort",this.Sh),this.Lh("emptied",this.Xh),this.Lh("error",this.Wb)}Yh(){this.Qh||(this.ih.add(this.Lh("loadeddata",this.Zh),this.Lh("loadedmetadata",this._h),this.Lh("canplay",this.Rb),this.Lh("canplaythrough",this.$h),this.Lh("durationchange",this.ai),this.Lh("play",this.bi),this.Lh("progress",this.ci),this.Lh("stalled",this.di),this.Lh("suspend",this.ei)),this.Qh=!0)}fi(){this.Rh||(this.ih.add(this.Lh("pause",this.gi),this.Lh("playing",this.hi),this.Lh("ratechange",this.ii),this.Lh("seeked",this.ji),this.Lh("seeking",this.ki),this.Lh("ended",this.li),this.Lh("volumechange",this.ac),this.Lh("waiting",this.mi)),this.Rh=!0)}ni=void 0;pi=void 0;Lh(t,i){return(0,s.k6)(this.j,t,i.bind(this))}qi(t){}Mh(t,i){this.jg.p("time-update",{detail:{currentTime:Math.min(t,this.ph.$store.seekableEnd()),played:this.j.played},trigger:i})}ge(t){if(3===this.j.networkState)return void this.Sh(t);this.Yh(),this.jg.p("load-start",{trigger:t})}Sh(t){this.jg.p("abort",{trigger:t})}Xh(){this.jg.p("emptied",{trigger:event})}Zh(t){this.jg.p("loaded-data",{trigger:t})}_h(t){this.Th(),this.fi(),this.jg.p("volume-change",{detail:{volume:this.j.volume,muted:this.j.muted}}),this.jg.p("loaded-metadata",{trigger:t}),o.I&&(0,r.i)(this.ph.$store.source())&&this.jg.lf(this.Ph(),t)}Ph(){return{duration:this.j.duration,buffered:this.j.buffered,seekable:this.j.seekable}}Th(){let t=!Number.isFinite(this.j.duration);this.jg.p("stream-type-change",{detail:t?"live":"on-demand"})}bi(t){this.ph.$store.canPlay&&this.jg.p("play",{trigger:t})}gi(t){(1!==this.j.readyState||this.Nh)&&(this.Nh=!1,this.Oh.P(),this.jg.p("pause",{trigger:t}))}Rb(t){this.jg.lf(this.Ph(),t)}$h(t){this.ph.$store.started()||this.jg.p("can-play-through",{trigger:t,detail:this.Ph()})}hi(t){this.Nh=!1,this.jg.p("playing",{trigger:t}),this.Oh.O()}di(t){this.jg.p("stalled",{trigger:t}),this.j.readyState<3&&(this.Nh=!0,this.jg.p("waiting",{trigger:t}))}mi(t){this.j.readyState<3&&(this.Nh=!0,this.jg.p("waiting",{trigger:t}))}li(t){this.Oh.P(),this.Mh(this.j.duration,t),this.jg.p("end",{trigger:t}),this.ph.$store.loop()?this.oi():this.jg.p("ended",{trigger:t})}Vh(){this.ph.$store.paused()&&(0,s.k6)(this.j,"timeupdate",this.Vb.bind(this))}Vb(t){this.Mh(this.j.currentTime,t)}ai(t){this.Th(),this.ph.$store.ended()&&this.Mh(this.j.duration,t),this.jg.p("duration-change",{detail:this.j.duration,trigger:t})}ac(t){this.jg.p("volume-change",{detail:{volume:this.j.volume,muted:this.j.muted},trigger:t})}ji(t){this.Mh(this.j.currentTime,t),this.jg.p("seeked",{detail:this.j.currentTime,trigger:t}),Math.trunc(this.j.currentTime)===Math.trunc(this.j.duration)&&(0,l.y)(this.j.duration)>(0,l.y)(this.j.currentTime)&&(this.Mh(this.j.duration,t),this.j.ended||this.ph.player.dispatchEvent(new s.vP("media-play-request",{trigger:t})))}ki(t){this.jg.p("seeking",{detail:this.j.currentTime,trigger:t})}ci(t){this.jg.p("progress",{detail:{buffered:this.j.buffered,seekable:this.j.seekable},trigger:t})}oi(){(0,h.gD)(this.j.controls)&&(this.j.controls=!1),this.ph.player.dispatchEvent(new s.vP("media-loop-request"))}ei(t){this.jg.p("suspend",{trigger:t})}ii(t){this.jg.p("rate-change",{detail:this.j.playbackRate,trigger:t})}Wb(t){let i=this.j.error;i&&this.jg.p("error",{detail:{message:i.message,code:i.code,mediaError:i},trigger:t})}}class u{constructor(t,i){this.q=t,this.ph=i,this.ri.onaddtrack=this.ti.bind(this),this.ri.onremovetrack=this.ui.bind(this),this.ri.onchange=this.vi.bind(this),(0,s.k6)(this.ph.audioTracks,"change",this.wi.bind(this))}get ri(){return this.q.media.audioTracks}ti(t){let i=t.track;if(""===i.label)return;let e={id:i.id+"",label:i.label,language:i.language,kind:i.kind,selected:!1};this.ph.audioTracks[o.N](e,t),i.enabled&&(e.selected=!0)}ui(t){let i=this.ph.audioTracks.getById(t.track.id);i&&this.ph.audioTracks[o.W](i,t)}vi(t){let i=this.si();if(!i)return;let e=this.ph.audioTracks.getById(i.id);e&&this.ph.audioTracks[o.L](e,!0,t)}si(){return Array.from(this.ri).find(t=>t.enabled)}wi(t){let{current:i}=t.detail;if(!i)return;let e=this.ri.getTrackById(i.id);if(e){let t=this.si();t&&(t.enabled=!1),e.enabled=!0}}}class p{constructor(t){this.j=t}setup(t){new c(this,t),"audioTracks"in this.media&&new u(this,t)}get type(){return""}get media(){return this.j}get paused(){return this.j.paused}get muted(){return this.j.muted}set muted(t){this.j.muted=t}get volume(){return this.j.volume}set volume(t){this.j.volume=t}get currentTime(){return this.j.currentTime}set currentTime(t){this.j.currentTime=t}get playsinline(){return this.j.hasAttribute("playsinline")}set playsinline(t){(0,s.Bq)(this.j,"playsinline",t)}get playbackRate(){return this.j.playbackRate}set playbackRate(t){this.j.playbackRate=t}async play(){return this.j.play()}async pause(){return this.j.pause()}async loadSource({src:t},i){this.j.preload=i,(0,r.b)(t)?this.j.srcObject=t:(this.j.srcObject=null,this.j.src=(0,h.Kg)(t)?t:window.URL.createObjectURL(t)),this.j.load()}}},88347:(t,i,e)=>{e.d(i,{H:()=>d,R:()=>n});var s=e(8334),h=e(52598),r=e(60140),a=e(47707);class n{constructor(t){this.jf=t}xi;O(){(0,h.b0)(this.xi)&&this.yi()}P(){(0,h.Et)(this.xi)&&window.cancelAnimationFrame(this.xi),this.xi=void 0}yi(){this.xi=window.requestAnimationFrame(()=>{(0,h.b0)(this.xi)||(this.jf(),this.yi())})}}class d{constructor(t){this.qa=t}ph;za=null;qh=null;nh={};oh=new Set;get instance(){return this.za}setup(t,i){this.ph=i;let e=(0,s.se)(i.$store.streamType).includes("live"),n=(0,s.se)(i.$store.streamType).includes("ll-");this.za=new t({lowLatencyMode:n,backBufferLength:n?4:e?8:void 0,renderTextTracksNatively:!1,...this.nh});let d=this.rh.bind(this);for(let i of Object.values(t.Events))this.za.on(i,d);for(let i of(this.za.on(t.Events.ERROR,this.Wb.bind(this)),this.oh))i(this.za);i.player.dispatchEvent(new r.vP("hls-instance",{detail:this.za})),this.za.attachMedia(this.qa),this.za.on(t.Events.AUDIO_TRACK_SWITCHED,this.sh.bind(this)),this.za.on(t.Events.LEVEL_SWITCHED,this.th.bind(this)),this.za.on(t.Events.LEVEL_LOADED,this.uh.bind(this)),this.za.on(t.Events.NON_NATIVE_TEXT_TRACKS_FOUND,this.vh.bind(this)),this.za.on(t.Events.CUES_PARSED,this.wh.bind(this)),i.qualities[a.F]=this.xh.bind(this),(0,r.k6)(i.qualities,"change",this.Pf.bind(this)),(0,r.k6)(i.audioTracks,"change",this.yh.bind(this)),this.qh=(0,h.QZ)(this.zh.bind(this))}zh(){if(!this.ph.$store.live())return;let t=new n(this.Ah.bind(this));return t.O(),t.P.bind(t)}Ah(){this.ph.$store.liveSyncPosition.set(this.za?.liveSyncPosition??1/0)}rh(t,i){this.ph.player.dispatchEvent(new r.vP((0,r.BW)(t),{detail:i}))}vh(t,i){let e=new r.vP(t,{detail:i}),s=-1;for(let t=0;t<i.tracks.length;t++){let h=i.tracks[t],r=h.subtitleTrack??h.closedCaptions,n=new a.G({id:`hls-${h.kind}${t}`,src:r?.url,label:h.label,language:r?.lang,kind:h.kind});n[a.H]=2,n[a.J]=()=>{"showing"===n.mode?(this.za.subtitleTrack=t,s=t):s===t&&(this.za.subtitleTrack=-1,s=-1)},h.default&&n.setMode("showing",e),this.ph.textTracks.add(n,e)}}wh(t,i){let e=this.ph.textTracks.getById(`hls-${i.track}`);if(!e)return;let s=new r.vP(t,{detail:i});for(let t of i.cues)t.positionAlign="auto",e.addCue(t,s)}sh(t,i){let e=this.ph.audioTracks[i.id];e&&this.ph.audioTracks[a.L](e,!0,new r.vP(t,{detail:i}))}th(t,i){let e=this.ph.qualities[i.level];e&&this.ph.qualities[a.L](e,!0,new r.vP(t,{detail:i}))}uh(t,i){if(this.ph.$store.canPlay())return;let{type:e,live:s,totalduration:h}=i.details,n=new r.vP(t,{detail:i});this.ph.delegate.p("stream-type-change",{detail:s?"EVENT"===e&&Number.isFinite(h)?"live:dvr":"live":"on-demand",trigger:n}),this.ph.delegate.p("duration-change",{detail:h,trigger:n});let d=this.za.media;for(let t of(-1===this.za.currentLevel&&this.ph.qualities[a.K](!0,n),this.za.audioTracks))this.ph.audioTracks[a.N]({id:t.id+"",label:t.name,language:t.lang||"",kind:"main"},n);for(let t of this.za.levels)this.ph.qualities[a.N]({width:t.width,height:t.height,codec:t.codecSet,bitrate:t.bitrate},n);d.dispatchEvent(new r.vP("canplay",{trigger:n}))}Wb(t,i){if(i.fatal)switch(i.type){case"networkError":this.za?.startLoad();break;case"mediaError":this.za?.recoverMediaError();break;default:this.za?.destroy(),this.za=null}}xh(){this.za&&(this.za.currentLevel=-1)}Pf(){let{qualities:t}=this.ph;this.za&&!t.auto&&(this.za[t.switch+"Level"]=t.selectedIndex,a.P&&(this.qa.currentTime=this.qa.currentTime))}yh(){let{audioTracks:t}=this.ph;this.za&&this.za.audioTrack!==t.selectedIndex&&(this.za.audioTrack=t.selectedIndex)}Jg(){this.ph&&(this.ph.qualities[a.F]=void 0),this.za?.destroy(),this.za=null,this.qh?.(),this.qh=null}}}}]);